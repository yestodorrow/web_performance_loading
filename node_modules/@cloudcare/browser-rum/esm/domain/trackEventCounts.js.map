{"version":3,"file":"trackEventCounts.js","names":["noop","RumEventType","LifeCycleEventType","trackEventCounts","data","lifeCycle","isChildEvent","callback","onChange","undefined","eventCounts","errorCount","longTaskCount","resourceCount","actionCount","frustrationCount","subscription","subscribe","RUM_EVENT_COLLECTED","event","type","VIEW","ERROR","ACTION","action","frustration","length","LONG_TASK","RESOURCE","stop","unsubscribe"],"sources":["../../src/domain/trackEventCounts.js"],"sourcesContent":["import { noop, RumEventType, LifeCycleEventType } from '@cloudcare/browser-core'\n\nexport function trackEventCounts(data) {\n  var lifeCycle = data.lifeCycle\n  var isChildEvent = data.isChildEvent\n  var callback = data.onChange\n  if (callback === undefined) {\n    callback = noop\n  }\n  var eventCounts = {\n    errorCount: 0,\n    longTaskCount: 0,\n    resourceCount: 0,\n    actionCount: 0,\n    frustrationCount: 0\n  }\n\n  var subscription = lifeCycle.subscribe(\n    LifeCycleEventType.RUM_EVENT_COLLECTED,\n    function (event) {\n      if (event.type === RumEventType.VIEW || !isChildEvent(event)) {\n        return\n      }\n      switch (event.type) {\n        case RumEventType.ERROR:\n          eventCounts.errorCount += 1\n\n          callback()\n          break\n        case RumEventType.ACTION:\n          if (event.action.frustration) {\n            eventCounts.frustrationCount += event.action.frustration.type.length\n          }\n          eventCounts.actionCount += 1\n          callback()\n          break\n        case RumEventType.LONG_TASK:\n          eventCounts.longTaskCount += 1\n          callback()\n          break\n        case RumEventType.RESOURCE:\n          eventCounts.resourceCount += 1\n          callback()\n          break\n      }\n    }\n  )\n\n  return {\n    stop: function () {\n      subscription.unsubscribe()\n    },\n    eventCounts: eventCounts\n  }\n}\n"],"mappings":"AAAA,SAASA,IAAI,EAAEC,YAAY,EAAEC,kBAAkB,QAAQ,yBAAyB;AAEhF,OAAO,SAASC,gBAAgBA,CAACC,IAAI,EAAE;EACrC,IAAIC,SAAS,GAAGD,IAAI,CAACC,SAAS;EAC9B,IAAIC,YAAY,GAAGF,IAAI,CAACE,YAAY;EACpC,IAAIC,QAAQ,GAAGH,IAAI,CAACI,QAAQ;EAC5B,IAAID,QAAQ,KAAKE,SAAS,EAAE;IAC1BF,QAAQ,GAAGP,IAAI;EACjB;EACA,IAAIU,WAAW,GAAG;IAChBC,UAAU,EAAE,CAAC;IACbC,aAAa,EAAE,CAAC;IAChBC,aAAa,EAAE,CAAC;IAChBC,WAAW,EAAE,CAAC;IACdC,gBAAgB,EAAE;EACpB,CAAC;EAED,IAAIC,YAAY,GAAGX,SAAS,CAACY,SAAS,CACpCf,kBAAkB,CAACgB,mBAAmB,EACtC,UAAUC,KAAK,EAAE;IACf,IAAIA,KAAK,CAACC,IAAI,KAAKnB,YAAY,CAACoB,IAAI,IAAI,CAACf,YAAY,CAACa,KAAK,CAAC,EAAE;MAC5D;IACF;IACA,QAAQA,KAAK,CAACC,IAAI;MAChB,KAAKnB,YAAY,CAACqB,KAAK;QACrBZ,WAAW,CAACC,UAAU,IAAI,CAAC;QAE3BJ,QAAQ,CAAC,CAAC;QACV;MACF,KAAKN,YAAY,CAACsB,MAAM;QACtB,IAAIJ,KAAK,CAACK,MAAM,CAACC,WAAW,EAAE;UAC5Bf,WAAW,CAACK,gBAAgB,IAAII,KAAK,CAACK,MAAM,CAACC,WAAW,CAACL,IAAI,CAACM,MAAM;QACtE;QACAhB,WAAW,CAACI,WAAW,IAAI,CAAC;QAC5BP,QAAQ,CAAC,CAAC;QACV;MACF,KAAKN,YAAY,CAAC0B,SAAS;QACzBjB,WAAW,CAACE,aAAa,IAAI,CAAC;QAC9BL,QAAQ,CAAC,CAAC;QACV;MACF,KAAKN,YAAY,CAAC2B,QAAQ;QACxBlB,WAAW,CAACG,aAAa,IAAI,CAAC;QAC9BN,QAAQ,CAAC,CAAC;QACV;IACJ;EACF,CACF,CAAC;EAED,OAAO;IACLsB,IAAI,EAAE,SAAAA,KAAA,EAAY;MAChBb,YAAY,CAACc,WAAW,CAAC,CAAC;IAC5B,CAAC;IACDpB,WAAW,EAAEA;EACf,CAAC;AACH","ignoreList":[]}