{"version":3,"file":"jaegerTracer.js","names":["TraceIdentifier","getCrypto","JaegerTracer","configuration","traceSampled","_traceId","_spanId","_traceSampled","is128Bit","traceId128Bit","prototype","isTracingSupported","undefined","getSpanId","toPaddedHexadecimalString","getTraceId","getUberTraceId","makeTracingHeaders"],"sources":["../../../src/domain/tracing/jaegerTracer.js"],"sourcesContent":["import { TraceIdentifier, getCrypto } from './traceIdentifier'\n\n/**\n *\n * @param {*} configuration  配置信息\n */\nexport function JaegerTracer(configuration, traceSampled) {\n  this._traceId = new TraceIdentifier()\n  this._spanId = new TraceIdentifier()\n  this._traceSampled = traceSampled\n  this.is128Bit = configuration.traceId128Bit\n}\nJaegerTracer.prototype = {\n  isTracingSupported: function () {\n    return getCrypto() !== undefined\n  },\n  getSpanId: function () {\n    return this._spanId.toPaddedHexadecimalString()\n  },\n  getTraceId: function () {\n    return this.is128Bit\n      ? '0000000000000000' + this._traceId.toPaddedHexadecimalString()\n      : this._traceId.toPaddedHexadecimalString()\n  },\n  getUberTraceId: function () {\n    //{trace-id}:{span-id}:{parent-span-id}:{flags}\n    return (\n      this.getTraceId() +\n      ':' +\n      this.getSpanId() +\n      ':' +\n      '0' +\n      ':' +\n      (this._traceSampled ? '1' : '0')\n    )\n  },\n  makeTracingHeaders: function () {\n    return {\n      'uber-trace-id': this.getUberTraceId()\n    }\n  }\n}\n"],"mappings":"AAAA,SAASA,eAAe,EAAEC,SAAS,QAAQ,mBAAmB;;AAE9D;AACA;AACA;AACA;AACA,OAAO,SAASC,YAAYA,CAACC,aAAa,EAAEC,YAAY,EAAE;EACxD,IAAI,CAACC,QAAQ,GAAG,IAAIL,eAAe,CAAC,CAAC;EACrC,IAAI,CAACM,OAAO,GAAG,IAAIN,eAAe,CAAC,CAAC;EACpC,IAAI,CAACO,aAAa,GAAGH,YAAY;EACjC,IAAI,CAACI,QAAQ,GAAGL,aAAa,CAACM,aAAa;AAC7C;AACAP,YAAY,CAACQ,SAAS,GAAG;EACvBC,kBAAkB,EAAE,SAAAA,mBAAA,EAAY;IAC9B,OAAOV,SAAS,CAAC,CAAC,KAAKW,SAAS;EAClC,CAAC;EACDC,SAAS,EAAE,SAAAA,UAAA,EAAY;IACrB,OAAO,IAAI,CAACP,OAAO,CAACQ,yBAAyB,CAAC,CAAC;EACjD,CAAC;EACDC,UAAU,EAAE,SAAAA,WAAA,EAAY;IACtB,OAAO,IAAI,CAACP,QAAQ,GAChB,kBAAkB,GAAG,IAAI,CAACH,QAAQ,CAACS,yBAAyB,CAAC,CAAC,GAC9D,IAAI,CAACT,QAAQ,CAACS,yBAAyB,CAAC,CAAC;EAC/C,CAAC;EACDE,cAAc,EAAE,SAAAA,eAAA,EAAY;IAC1B;IACA,OACE,IAAI,CAACD,UAAU,CAAC,CAAC,GACjB,GAAG,GACH,IAAI,CAACF,SAAS,CAAC,CAAC,GAChB,GAAG,GACH,GAAG,GACH,GAAG,IACF,IAAI,CAACN,aAAa,GAAG,GAAG,GAAG,GAAG,CAAC;EAEpC,CAAC;EACDU,kBAAkB,EAAE,SAAAA,mBAAA,EAAY;IAC9B,OAAO;MACL,eAAe,EAAE,IAAI,CAACD,cAAc,CAAC;IACvC,CAAC;EACH;AACF,CAAC","ignoreList":[]}