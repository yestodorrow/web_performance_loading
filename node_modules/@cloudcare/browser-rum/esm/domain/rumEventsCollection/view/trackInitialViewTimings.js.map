{"version":3,"file":"trackInitialViewTimings.js","names":["ONE_MINUTE","trackFirstContentfulPaint","trackFirstInput","trackNavigationTimings","trackLargestContentfulPaint","trackFirstHidden","KEEP_TRACKING_TIMINGS_AFTER_VIEW_DELAY","trackInitialViewMetrics","lifeCycle","configuration","setLoadEvent","scheduleViewUpdate","initialViewMetrics","_trackNavigationTimings","navigationTimings","loadEvent","firstHidden","stopNavigationTracking","stop","_trackFirstContentfulPaint","firstContentfulPaint","stopFCPTracking","_trackLargestContentfulPaint","window","largestContentfulPaint","stopLCPTracking","_trackFirstInput","firstInput","stopFIDTracking"],"sources":["../../../../src/domain/rumEventsCollection/view/trackInitialViewTimings.js"],"sourcesContent":["import { ONE_MINUTE } from '@cloudcare/browser-core'\nimport { trackFirstContentfulPaint } from './trackFirstContentfulPaint'\nimport { trackFirstInput } from './trackFirstInput'\nimport { trackNavigationTimings } from './trackNavigationTimings'\nimport { trackLargestContentfulPaint } from './trackLargestContentfulPaint'\nimport { trackFirstHidden } from './trackFirstHidden'\n\nexport var KEEP_TRACKING_TIMINGS_AFTER_VIEW_DELAY = 5 * ONE_MINUTE\nexport function trackInitialViewMetrics(\n  lifeCycle,\n  configuration,\n  setLoadEvent,\n  scheduleViewUpdate\n) {\n  var initialViewMetrics = {}\n  var _trackNavigationTimings = trackNavigationTimings(\n    lifeCycle,\n    function (navigationTimings) {\n      setLoadEvent(navigationTimings.loadEvent)\n      initialViewMetrics.navigationTimings = navigationTimings\n      scheduleViewUpdate()\n    }\n  )\n  var firstHidden = trackFirstHidden()\n  var stopNavigationTracking = _trackNavigationTimings.stop\n  var _trackFirstContentfulPaint = trackFirstContentfulPaint(\n    lifeCycle,\n    firstHidden,\n    function (firstContentfulPaint) {\n      initialViewMetrics.firstContentfulPaint = firstContentfulPaint\n      scheduleViewUpdate()\n    }\n  )\n  var stopFCPTracking = _trackFirstContentfulPaint.stop\n  var _trackLargestContentfulPaint = trackLargestContentfulPaint(\n    lifeCycle,\n    configuration,\n    firstHidden,\n    window,\n    function (largestContentfulPaint) {\n      initialViewMetrics.largestContentfulPaint = largestContentfulPaint\n      scheduleViewUpdate()\n    }\n  )\n  var stopLCPTracking = _trackLargestContentfulPaint.stop\n  var _trackFirstInput = trackFirstInput(\n    lifeCycle,\n    configuration,\n    firstHidden,\n    function (firstInput) {\n      initialViewMetrics.firstInput = firstInput\n      scheduleViewUpdate()\n    }\n  )\n  var stopFIDTracking = _trackFirstInput.stop\n  function stop() {\n    stopNavigationTracking()\n    stopFCPTracking()\n    stopLCPTracking()\n    stopFIDTracking()\n    firstHidden.stop()\n  }\n\n  return {\n    stop: stop,\n    initialViewMetrics: initialViewMetrics\n  }\n}\n"],"mappings":"AAAA,SAASA,UAAU,QAAQ,yBAAyB;AACpD,SAASC,yBAAyB,QAAQ,6BAA6B;AACvE,SAASC,eAAe,QAAQ,mBAAmB;AACnD,SAASC,sBAAsB,QAAQ,0BAA0B;AACjE,SAASC,2BAA2B,QAAQ,+BAA+B;AAC3E,SAASC,gBAAgB,QAAQ,oBAAoB;AAErD,OAAO,IAAIC,sCAAsC,GAAG,CAAC,GAAGN,UAAU;AAClE,OAAO,SAASO,uBAAuBA,CACrCC,SAAS,EACTC,aAAa,EACbC,YAAY,EACZC,kBAAkB,EAClB;EACA,IAAIC,kBAAkB,GAAG,CAAC,CAAC;EAC3B,IAAIC,uBAAuB,GAAGV,sBAAsB,CAClDK,SAAS,EACT,UAAUM,iBAAiB,EAAE;IAC3BJ,YAAY,CAACI,iBAAiB,CAACC,SAAS,CAAC;IACzCH,kBAAkB,CAACE,iBAAiB,GAAGA,iBAAiB;IACxDH,kBAAkB,CAAC,CAAC;EACtB,CACF,CAAC;EACD,IAAIK,WAAW,GAAGX,gBAAgB,CAAC,CAAC;EACpC,IAAIY,sBAAsB,GAAGJ,uBAAuB,CAACK,IAAI;EACzD,IAAIC,0BAA0B,GAAGlB,yBAAyB,CACxDO,SAAS,EACTQ,WAAW,EACX,UAAUI,oBAAoB,EAAE;IAC9BR,kBAAkB,CAACQ,oBAAoB,GAAGA,oBAAoB;IAC9DT,kBAAkB,CAAC,CAAC;EACtB,CACF,CAAC;EACD,IAAIU,eAAe,GAAGF,0BAA0B,CAACD,IAAI;EACrD,IAAII,4BAA4B,GAAGlB,2BAA2B,CAC5DI,SAAS,EACTC,aAAa,EACbO,WAAW,EACXO,MAAM,EACN,UAAUC,sBAAsB,EAAE;IAChCZ,kBAAkB,CAACY,sBAAsB,GAAGA,sBAAsB;IAClEb,kBAAkB,CAAC,CAAC;EACtB,CACF,CAAC;EACD,IAAIc,eAAe,GAAGH,4BAA4B,CAACJ,IAAI;EACvD,IAAIQ,gBAAgB,GAAGxB,eAAe,CACpCM,SAAS,EACTC,aAAa,EACbO,WAAW,EACX,UAAUW,UAAU,EAAE;IACpBf,kBAAkB,CAACe,UAAU,GAAGA,UAAU;IAC1ChB,kBAAkB,CAAC,CAAC;EACtB,CACF,CAAC;EACD,IAAIiB,eAAe,GAAGF,gBAAgB,CAACR,IAAI;EAC3C,SAASA,IAAIA,CAAA,EAAG;IACdD,sBAAsB,CAAC,CAAC;IACxBI,eAAe,CAAC,CAAC;IACjBI,eAAe,CAAC,CAAC;IACjBG,eAAe,CAAC,CAAC;IACjBZ,WAAW,CAACE,IAAI,CAAC,CAAC;EACpB;EAEA,OAAO;IACLA,IAAI,EAAEA,IAAI;IACVN,kBAAkB,EAAEA;EACtB,CAAC;AACH","ignoreList":[]}