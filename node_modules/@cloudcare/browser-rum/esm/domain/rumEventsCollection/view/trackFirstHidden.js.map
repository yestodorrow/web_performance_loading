{"version":3,"file":"trackFirstHidden.js","names":["DOM_EVENT","addEventListeners","trackFirstHidden","eventTarget","window","timeStamp","stopListeners","document","visibilityState","Infinity","PAGE_HIDE","VISIBILITY_CHANGE","event","type","capture","stop","geTimeStamp"],"sources":["../../../../src/domain/rumEventsCollection/view/trackFirstHidden.js"],"sourcesContent":["import { DOM_EVENT, addEventListeners } from '@cloudcare/browser-core'\n\nexport function trackFirstHidden(eventTarget) {\n  if (typeof eventTarget === 'undefined') {\n    eventTarget = window\n  }\n  var timeStamp\n  var stopListeners\n  if (document.visibilityState === 'hidden') {\n    timeStamp = 0\n  } else {\n    timeStamp = Infinity\n    var stopListeners = addEventListeners(\n      eventTarget,\n      [DOM_EVENT.PAGE_HIDE, DOM_EVENT.VISIBILITY_CHANGE],\n      function (event) {\n        if (\n          event.type === DOM_EVENT.PAGE_HIDE ||\n          document.visibilityState === 'hidden'\n        ) {\n          timeStamp = event.timeStamp\n          stopListeners()\n        }\n      },\n      { capture: true }\n    ).stop\n  }\n\n  return {\n    geTimeStamp() {\n      return timeStamp\n    },\n    stop: function () {\n      stopListeners && stopListeners()\n    }\n  }\n}\n"],"mappings":"AAAA,SAASA,SAAS,EAAEC,iBAAiB,QAAQ,yBAAyB;AAEtE,OAAO,SAASC,gBAAgBA,CAACC,WAAW,EAAE;EAC5C,IAAI,OAAOA,WAAW,KAAK,WAAW,EAAE;IACtCA,WAAW,GAAGC,MAAM;EACtB;EACA,IAAIC,SAAS;EACb,IAAIC,aAAa;EACjB,IAAIC,QAAQ,CAACC,eAAe,KAAK,QAAQ,EAAE;IACzCH,SAAS,GAAG,CAAC;EACf,CAAC,MAAM;IACLA,SAAS,GAAGI,QAAQ;IACpB,IAAIH,aAAa,GAAGL,iBAAiB,CACnCE,WAAW,EACX,CAACH,SAAS,CAACU,SAAS,EAAEV,SAAS,CAACW,iBAAiB,CAAC,EAClD,UAAUC,KAAK,EAAE;MACf,IACEA,KAAK,CAACC,IAAI,KAAKb,SAAS,CAACU,SAAS,IAClCH,QAAQ,CAACC,eAAe,KAAK,QAAQ,EACrC;QACAH,SAAS,GAAGO,KAAK,CAACP,SAAS;QAC3BC,aAAa,CAAC,CAAC;MACjB;IACF,CAAC,EACD;MAAEQ,OAAO,EAAE;IAAK,CAClB,CAAC,CAACC,IAAI;EACR;EAEA,OAAO;IACLC,WAAW,WAAAA,YAAA,EAAG;MACZ,OAAOX,SAAS;IAClB,CAAC;IACDU,IAAI,EAAE,SAAAA,KAAA,EAAY;MAChBT,aAAa,IAAIA,aAAa,CAAC,CAAC;IAClC;EACF,CAAC;AACH","ignoreList":[]}