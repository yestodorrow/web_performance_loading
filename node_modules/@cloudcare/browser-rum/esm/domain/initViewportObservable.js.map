{"version":3,"file":"initViewportObservable.js","names":["Observable","throttle","addEventListener","DOM_EVENT","viewportObservable","initViewportObservable","createViewportObservable","observable","_throttledUpdateDimension","notify","getViewportDimension","updateDimension","throttled","window","RESIZE","capture","passive","stop","visual","visualViewport","width","Number","scale","height","innerWidth","innerHeight"],"sources":["../../src/domain/initViewportObservable.js"],"sourcesContent":["import {\n  Observable,\n  throttle,\n  addEventListener,\n  DOM_EVENT\n} from '@cloudcare/browser-core'\n\nvar viewportObservable\n\nexport function initViewportObservable() {\n  if (!viewportObservable) {\n    viewportObservable = createViewportObservable()\n  }\n  return viewportObservable\n}\n\nexport function createViewportObservable() {\n  return new Observable(function (observable) {\n    var _throttledUpdateDimension = throttle(function () {\n      observable.notify(getViewportDimension())\n    }, 200)\n    var updateDimension = _throttledUpdateDimension.throttled\n    return addEventListener(window, DOM_EVENT.RESIZE, updateDimension, {\n      capture: true,\n      passive: true\n    }).stop\n  })\n}\n\n// excludes the width and height of any rendered classic scrollbar that is fixed to the visual viewport\nexport function getViewportDimension() {\n  var visual = window.visualViewport\n  if (visual) {\n    return {\n      width: Number(visual.width * visual.scale),\n      height: Number(visual.height * visual.scale)\n    }\n  }\n\n  return {\n    width: Number(window.innerWidth || 0),\n    height: Number(window.innerHeight || 0)\n  }\n}\n"],"mappings":"AAAA,SACEA,UAAU,EACVC,QAAQ,EACRC,gBAAgB,EAChBC,SAAS,QACJ,yBAAyB;AAEhC,IAAIC,kBAAkB;AAEtB,OAAO,SAASC,sBAAsBA,CAAA,EAAG;EACvC,IAAI,CAACD,kBAAkB,EAAE;IACvBA,kBAAkB,GAAGE,wBAAwB,CAAC,CAAC;EACjD;EACA,OAAOF,kBAAkB;AAC3B;AAEA,OAAO,SAASE,wBAAwBA,CAAA,EAAG;EACzC,OAAO,IAAIN,UAAU,CAAC,UAAUO,UAAU,EAAE;IAC1C,IAAIC,yBAAyB,GAAGP,QAAQ,CAAC,YAAY;MACnDM,UAAU,CAACE,MAAM,CAACC,oBAAoB,CAAC,CAAC,CAAC;IAC3C,CAAC,EAAE,GAAG,CAAC;IACP,IAAIC,eAAe,GAAGH,yBAAyB,CAACI,SAAS;IACzD,OAAOV,gBAAgB,CAACW,MAAM,EAAEV,SAAS,CAACW,MAAM,EAAEH,eAAe,EAAE;MACjEI,OAAO,EAAE,IAAI;MACbC,OAAO,EAAE;IACX,CAAC,CAAC,CAACC,IAAI;EACT,CAAC,CAAC;AACJ;;AAEA;AACA,OAAO,SAASP,oBAAoBA,CAAA,EAAG;EACrC,IAAIQ,MAAM,GAAGL,MAAM,CAACM,cAAc;EAClC,IAAID,MAAM,EAAE;IACV,OAAO;MACLE,KAAK,EAAEC,MAAM,CAACH,MAAM,CAACE,KAAK,GAAGF,MAAM,CAACI,KAAK,CAAC;MAC1CC,MAAM,EAAEF,MAAM,CAACH,MAAM,CAACK,MAAM,GAAGL,MAAM,CAACI,KAAK;IAC7C,CAAC;EACH;EAEA,OAAO;IACLF,KAAK,EAAEC,MAAM,CAACR,MAAM,CAACW,UAAU,IAAI,CAAC,CAAC;IACrCD,MAAM,EAAEF,MAAM,CAACR,MAAM,CAACY,WAAW,IAAI,CAAC;EACxC,CAAC;AACH","ignoreList":[]}