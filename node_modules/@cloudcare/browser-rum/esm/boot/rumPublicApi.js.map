{"version":3,"file":"rumPublicApi.js","names":["makePublicApi","areCookiesAuthorized","BoundedBuffer","display","buildCookieOptions","createContextManager","CustomerDataType","clocksNow","timeStampNow","ActionType","deepClone","createHandlingStack","sanitizeUser","checkUser","noop","assign","canUseEventBridge","monitor","extend2Lev","createStoredContextManager","validateAndBuildRumConfiguration","buildCommonContext","RUM_STORAGE_KEY","makeRumPublicApi","startRumImpl","recorderApi","isAlreadyInitialized","globalContextManager","GlobalContext","userContextManager","User","getInternalContextStrategy","undefined","getInitConfigurationStrategy","stopSessionStrategy","bufferApiCalls","addTimingStrategy","name","time","add","startViewStrategy","options","startClocks","addActionStrategy","action","commonContext","addErrorStrategy","providedError","initRum","initConfiguration","eventBridgeAvailable","overrideInitConfigurationForBridge","canHandleSession","canInitRum","configuration","trackViewsManually","doStartRum","beforeInitCalls","_startViewStrategy","drain","initialViewOptions","storeContextsToLocal","beforeInitGlobalContext","getContext","setContext","beforeInitUserContext","startRumResults","startView","addAction","addError","addTiming","getInternalContext","stopSession","onRumStart","lifeCycle","session","viewContexts","sanitizedOptions","_typeof","rumPublicApi","init","addRumGlobalContext","key","value","setGlobalContextProperty","setContextProperty","removeRumGlobalContext","remove","removeGlobalContextProperty","removeContextProperty","getRumGlobalContext","get","getGlobalContext","setRumGlobalContext","context","set","setGlobalContext","clearGlobalContext","clearContext","getInitConfiguration","startTime","addDebugSession","id","clearDebugSession","getDebugSession","type","CUSTOM","error","handlingStack","setUser","newUser","getUser","setUserProperty","property","sanitizedProperty","removeUserProperty","removeUser","clearUser","startSessionReplayRecording","start","stopSessionReplayRecording","stop","warn","isLocalFile","silentMultipleInit","window","location","protocol","applicationId","sessionSampleRate"],"sources":["../../src/boot/rumPublicApi.js"],"sourcesContent":["import {\n  makePublicApi,\n  areCookiesAuthorized,\n  BoundedBuffer,\n  display,\n  buildCookieOptions,\n  createContextManager,\n  CustomerDataType,\n  clocksNow,\n  timeStampNow,\n  ActionType,\n  deepClone,\n  createHandlingStack,\n  sanitizeUser,\n  checkUser,\n  noop,\n  assign,\n  canUseEventBridge,\n  monitor,\n  extend2Lev,\n  createStoredContextManager\n} from '@cloudcare/browser-core'\nimport { validateAndBuildRumConfiguration } from '../domain/configuration'\nimport { buildCommonContext } from '../domain/contexts/commonContext'\nvar RUM_STORAGE_KEY = 'rum'\nexport function makeRumPublicApi(startRumImpl, recorderApi) {\n  var isAlreadyInitialized = false\n\n  var globalContextManager = createContextManager(\n    CustomerDataType.GlobalContext\n  )\n  var userContextManager = createContextManager(CustomerDataType.User)\n\n  var getInternalContextStrategy = function () {\n    return undefined\n  }\n  var getInitConfigurationStrategy = function () {\n    return undefined\n  }\n  var stopSessionStrategy = function () {\n    return noop()\n  }\n  var bufferApiCalls = new BoundedBuffer()\n  var addTimingStrategy = function (name, time) {\n    if (typeof time === 'undefined') {\n      time = timeStampNow()\n    }\n    bufferApiCalls.add(function () {\n      return addTimingStrategy(name, time)\n    })\n  }\n  var startViewStrategy = function (options, startClocks) {\n    if (typeof startClocks === 'undefined') {\n      startClocks = clocksNow()\n    }\n    bufferApiCalls.add(function () {\n      return startViewStrategy(options, startClocks)\n    })\n  }\n  var addActionStrategy = function (action, commonContext) {\n    if (typeof commonContext == 'undefined') {\n      commonContext = buildCommonContext(\n        globalContextManager,\n        userContextManager,\n        recorderApi\n      )\n    }\n    bufferApiCalls.add(function () {\n      return addActionStrategy(action, commonContext)\n    })\n  }\n  var addErrorStrategy = function (providedError, commonContext) {\n    if (typeof commonContext == 'undefined') {\n      commonContext = buildCommonContext(\n        globalContextManager,\n        userContextManager,\n        recorderApi\n      )\n    }\n    bufferApiCalls.add(function () {\n      return addErrorStrategy(providedError, commonContext)\n    })\n  }\n\n  function initRum(initConfiguration) {\n    getInitConfigurationStrategy = function () {\n      return deepClone(initConfiguration)\n    }\n    var eventBridgeAvailable = canUseEventBridge()\n    if (eventBridgeAvailable) {\n      initConfiguration = overrideInitConfigurationForBridge(initConfiguration)\n    }\n    if (!canHandleSession(initConfiguration)) {\n      return\n    }\n\n    if (!canInitRum(initConfiguration)) {\n      return\n    }\n\n    var configuration = validateAndBuildRumConfiguration(initConfiguration)\n    if (!configuration) {\n      return\n    }\n\n    if (!configuration.trackViewsManually) {\n      doStartRum(configuration)\n    } else {\n      // drain beforeInitCalls by buffering them until we start RUM\n      // if we get a startView, drain re-buffered calls before continuing to drain beforeInitCalls\n      // in order to ensure that calls are processed in order\n      var beforeInitCalls = bufferApiCalls\n      bufferApiCalls = new BoundedBuffer()\n\n      startViewStrategy = function (options) {\n        doStartRum(configuration, options)\n      }\n      beforeInitCalls.drain()\n    }\n\n    isAlreadyInitialized = true\n  }\n  function doStartRum(configuration, initialViewOptions) {\n    if (configuration.storeContextsToLocal) {\n      // localstorage\n      var beforeInitGlobalContext = globalContextManager.getContext()\n      globalContextManager = createStoredContextManager(\n        RUM_STORAGE_KEY,\n        CustomerDataType.GlobalContext\n      )\n      globalContextManager.setContext(\n        extend2Lev(globalContextManager.getContext(), beforeInitGlobalContext)\n      )\n\n      var beforeInitUserContext = userContextManager.getContext()\n      userContextManager = createStoredContextManager(\n        RUM_STORAGE_KEY,\n        CustomerDataType.User\n      )\n      userContextManager.setContext(\n        extend2Lev(userContextManager.getContext(), beforeInitUserContext)\n      )\n    }\n    var startRumResults = startRumImpl(\n      configuration,\n      recorderApi,\n      globalContextManager,\n      userContextManager,\n      initialViewOptions\n    )\n    startViewStrategy = startRumResults.startView\n    addActionStrategy = startRumResults.addAction\n    addErrorStrategy = startRumResults.addError\n    addTimingStrategy = startRumResults.addTiming\n    getInternalContextStrategy = startRumResults.getInternalContext\n    stopSessionStrategy = startRumResults.stopSession\n    bufferApiCalls.drain()\n    recorderApi.onRumStart(\n      startRumResults.lifeCycle,\n      configuration,\n      startRumResults.session,\n      startRumResults.viewContexts\n    )\n  }\n  var startView = monitor(function (options) {\n    var sanitizedOptions =\n      typeof options === 'object' ? options : { name: options }\n    startViewStrategy(sanitizedOptions)\n  })\n  var rumPublicApi = makePublicApi({\n    init: monitor(initRum),\n    /** @deprecated: use setGlobalContextProperty instead */\n    addRumGlobalContext: monitor(function (key, value) {\n      return globalContextManager.add(key, value)\n    }),\n    setGlobalContextProperty: monitor(function (key, value) {\n      return globalContextManager.setContextProperty(key, value)\n    }),\n\n    /** @deprecated: use removeGlobalContextProperty instead */\n    removeRumGlobalContext: monitor(function (key) {\n      return globalContextManager.remove(key)\n    }),\n    removeGlobalContextProperty: monitor(function (key) {\n      return globalContextManager.removeContextProperty(key)\n    }),\n\n    /** @deprecated: use getGlobalContext instead */\n    getRumGlobalContext: monitor(function () {\n      return globalContextManager.get()\n    }),\n    getGlobalContext: monitor(function () {\n      return globalContextManager.getContext()\n    }),\n\n    /** @deprecated: use setGlobalContext instead */\n    setRumGlobalContext: monitor(function (context) {\n      return globalContextManager.set(context)\n    }),\n    setGlobalContext: monitor(function (context) {\n      return globalContextManager.setContext(context)\n    }),\n\n    clearGlobalContext: monitor(function () {\n      return globalContextManager.clearContext()\n    }),\n\n    getInitConfiguration: monitor(function () {\n      return getInitConfigurationStrategy()\n    }),\n    getInternalContext: monitor(function (startTime) {\n      return getInternalContextStrategy(startTime)\n    }),\n    addDebugSession: monitor(function (id) {}),\n    clearDebugSession: monitor(function () {}),\n    getDebugSession: monitor(function () {}),\n    addAction: monitor(function (name, context) {\n      addActionStrategy({\n        name: name,\n        context: deepClone(context),\n        startClocks: clocksNow(),\n        type: ActionType.CUSTOM\n      })\n    }),\n    addError: monitor(function (error, context) {\n      var handlingStack = createHandlingStack()\n      addErrorStrategy({\n        error: error,\n        handlingStack: handlingStack,\n        context: deepClone(context),\n        startClocks: clocksNow()\n      })\n    }),\n    addTiming: monitor(function (name, time) {\n      addTimingStrategy(name, time)\n    }),\n    setUser: monitor(function (newUser) {\n      if (checkUser(newUser)) {\n        userContextManager.setContext(sanitizeUser(newUser))\n      }\n    }),\n    getUser: monitor(function () {\n      return userContextManager.getContext()\n    }),\n    setUserProperty: monitor(function (key, property) {\n      var newUser = {}\n      newUser[key] = property\n      var sanitizedProperty = sanitizeUser(newUser)[key]\n      userContextManager.setContextProperty(key, sanitizedProperty)\n    }),\n    removeUserProperty: monitor(function (key) {\n      return userContextManager.removeContextProperty(key)\n    }),\n\n    /** @deprecated: renamed to clearUser */\n    removeUser: monitor(function () {\n      return userContextManager.clearContext()\n    }),\n    clearUser: monitor(function () {\n      return userContextManager.clearContext()\n    }),\n    startView: startView,\n    stopSession: monitor(function () {\n      stopSessionStrategy()\n    }),\n    startSessionReplayRecording: monitor(recorderApi.start),\n    stopSessionReplayRecording: monitor(recorderApi.stop)\n  })\n  return rumPublicApi\n  function canHandleSession(initConfiguration) {\n    if (!areCookiesAuthorized(buildCookieOptions(initConfiguration))) {\n      display.warn('Cookies are not authorized, we will not send any data.')\n      return false\n    }\n\n    if (isLocalFile()) {\n      display.error('Execution is not allowed in the current context.')\n      return false\n    }\n    return true\n  }\n  function canInitRum(initConfiguration) {\n    if (isAlreadyInitialized) {\n      if (!initConfiguration.silentMultipleInit) {\n        display.error('DATAFLUX_RUM is already initialized.')\n      }\n      return false\n    }\n    return true\n  }\n  function isLocalFile() {\n    return window.location.protocol === 'file:'\n  }\n  function overrideInitConfigurationForBridge(initConfiguration) {\n    return assign({}, initConfiguration, {\n      applicationId: '00000000-aaaa-0000-aaaa-000000000000',\n      sessionSampleRate: 100\n    })\n  }\n}\n"],"mappings":"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","ignoreList":[]}