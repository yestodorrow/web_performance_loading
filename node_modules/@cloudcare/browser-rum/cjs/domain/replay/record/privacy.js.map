{"version":3,"file":"privacy.js","names":["_browserCore","require","_constants","MAX_ATTRIBUTE_VALUE_CHAR_LENGTH","exports","TEXT_MASKING_CHAR","getNodePrivacyLevel","node","defaultPrivacyLevel","cache","has","get","parentNode","getParentNode","parentNodePrivacyLevel","selfNodePrivacyLevel","getNodeSelfPrivacyLevel","nodePrivacyLevel","reducePrivacyLevel","set","childPrivacyLevel","NodePrivacyLevel","HIDDEN","IGNORE","ALLOW","MASK","MASK_USER_INPUT","isElementNode","privAttr","getAttribute","PRIVACY_ATTR_NAME","tagName","inputElement","type","autocomplete","indexOf","PRIVACY_ATTR_VALUE_HIDDEN","classList","contains","PRIVACY_CLASS_HIDDEN","PRIVACY_ATTR_VALUE_MASK","PRIVACY_CLASS_MASK","PRIVACY_ATTR_VALUE_MASK_USER_INPUT","PRIVACY_CLASS_MASK_USER_INPUT","PRIVACY_ATTR_VALUE_ALLOW","PRIVACY_CLASS_ALLOW","shouldIgnoreElement","shouldMaskNode","privacyLevel","isTextNode","isFormElement","nodeType","ELEMENT_NODE","element","FORM_PRIVATE_TAG_NAMES","censorText","text","replace","getTextContent","textNode","ignoreWhiteSpace","parentTagName","parentElement","textContent","trim","isScript","CENSORED_STRING_MARK","nodeName","relAttribute","getLowerCaseAttribute","test","nameAttribute","propertyAttribute","hasAttribute","name","toLowerCase"],"sources":["../../../../src/domain/replay/record/privacy.js"],"sourcesContent":["import {\n  isElementNode,\n  getParentNode,\n  isTextNode\n} from '@cloudcare/browser-core'\n\nimport {\n  NodePrivacyLevel,\n  PRIVACY_ATTR_NAME,\n  PRIVACY_ATTR_VALUE_ALLOW,\n  PRIVACY_ATTR_VALUE_MASK,\n  PRIVACY_ATTR_VALUE_MASK_USER_INPUT,\n  PRIVACY_ATTR_VALUE_HIDDEN,\n  PRIVACY_CLASS_ALLOW,\n  PRIVACY_CLASS_MASK,\n  PRIVACY_CLASS_MASK_USER_INPUT,\n  PRIVACY_CLASS_HIDDEN,\n  FORM_PRIVATE_TAG_NAMES,\n  CENSORED_STRING_MARK\n} from '../../../constants'\n\nexport var MAX_ATTRIBUTE_VALUE_CHAR_LENGTH = 100_000\n\nvar TEXT_MASKING_CHAR = 'x'\n\n/**\n * Get node privacy level by iterating over its ancestors. When the direct parent privacy level is\n * know, it is best to use something like:\n *\n * derivePrivacyLevelGivenParent(getNodeSelfPrivacyLevel(node), parentNodePrivacyLevel)\n */\nexport function getNodePrivacyLevel(node, defaultPrivacyLevel, cache) {\n  if (cache && cache.has(node)) {\n    return cache.get(node)\n  }\n  var parentNode = getParentNode(node)\n  var parentNodePrivacyLevel = parentNode\n    ? getNodePrivacyLevel(parentNode, defaultPrivacyLevel)\n    : defaultPrivacyLevel\n  var selfNodePrivacyLevel = getNodeSelfPrivacyLevel(node)\n  var nodePrivacyLevel = reducePrivacyLevel(\n    selfNodePrivacyLevel,\n    parentNodePrivacyLevel\n  )\n  if (cache) {\n    cache.set(node, nodePrivacyLevel)\n  }\n  return nodePrivacyLevel\n}\n\n/**\n * Reduces the next privacy level based on self + parent privacy levels\n */\nexport function reducePrivacyLevel(childPrivacyLevel, parentNodePrivacyLevel) {\n  switch (parentNodePrivacyLevel) {\n    // These values cannot be overridden\n    case NodePrivacyLevel.HIDDEN:\n    case NodePrivacyLevel.IGNORE:\n      return parentNodePrivacyLevel\n  }\n  switch (childPrivacyLevel) {\n    case NodePrivacyLevel.ALLOW:\n    case NodePrivacyLevel.MASK:\n    case NodePrivacyLevel.MASK_USER_INPUT:\n    case NodePrivacyLevel.HIDDEN:\n    case NodePrivacyLevel.IGNORE:\n      return childPrivacyLevel\n    default:\n      return parentNodePrivacyLevel\n  }\n}\n\n/**\n * Determines the node's own privacy level without checking for ancestors.\n */\nexport function getNodeSelfPrivacyLevel(node) {\n  // Only Element types can have a privacy level set\n  if (!isElementNode(node)) {\n    return\n  }\n\n  var privAttr = node.getAttribute(PRIVACY_ATTR_NAME)\n\n  // Overrules for replay purpose\n  if (node.tagName === 'BASE') {\n    return NodePrivacyLevel.ALLOW\n  }\n\n  // Overrules to enforce end-user protection\n  if (node.tagName === 'INPUT') {\n    var inputElement = node\n    if (\n      inputElement.type === 'password' ||\n      inputElement.type === 'email' ||\n      inputElement.type === 'tel'\n    ) {\n      return NodePrivacyLevel.MASK\n    }\n    if (inputElement.type === 'hidden') {\n      return NodePrivacyLevel.MASK\n    }\n    var autocomplete = inputElement.getAttribute('autocomplete')\n    // Handle input[autocomplete=cc-number/cc-csc/cc-exp/cc-exp-month/cc-exp-year]\n    if (autocomplete && autocomplete.indexOf('cc-') === 0) {\n      return NodePrivacyLevel.MASK\n    }\n  }\n\n  // Check HTML privacy attributes and classes\n  if (\n    privAttr === PRIVACY_ATTR_VALUE_HIDDEN ||\n    node.classList.contains(PRIVACY_CLASS_HIDDEN)\n  ) {\n    return NodePrivacyLevel.HIDDEN\n  }\n\n  if (\n    privAttr === PRIVACY_ATTR_VALUE_MASK ||\n    node.classList.contains(PRIVACY_CLASS_MASK)\n  ) {\n    return NodePrivacyLevel.MASK\n  }\n\n  if (\n    privAttr === PRIVACY_ATTR_VALUE_MASK_USER_INPUT ||\n    node.classList.contains(PRIVACY_CLASS_MASK_USER_INPUT)\n  ) {\n    return NodePrivacyLevel.MASK_USER_INPUT\n  }\n\n  if (\n    privAttr === PRIVACY_ATTR_VALUE_ALLOW ||\n    node.classList.contains(PRIVACY_CLASS_ALLOW)\n  ) {\n    return NodePrivacyLevel.ALLOW\n  }\n\n  if (shouldIgnoreElement(node)) {\n    return NodePrivacyLevel.IGNORE\n  }\n}\n\n/**\n * Helper aiming to unify `mask` and `mask-user-input` privacy levels:\n *\n * In the `mask` case, it is trivial: we should mask the element.\n *\n * In the `mask-user-input` case, we should mask the element only if it is a \"form\" element or the\n * direct parent is a form element for text nodes).\n *\n * Other `shouldMaskNode` cases are edge cases that should not matter too much (ex: should we mask a\n * node if it is ignored or hidden? it doesn't matter since it won't be serialized).\n */\nexport function shouldMaskNode(node, privacyLevel) {\n  switch (privacyLevel) {\n    case NodePrivacyLevel.MASK:\n    case NodePrivacyLevel.HIDDEN:\n    case NodePrivacyLevel.IGNORE:\n      return true\n    case NodePrivacyLevel.MASK_USER_INPUT:\n      return isTextNode(node)\n        ? isFormElement(node.parentNode)\n        : isFormElement(node)\n    default:\n      return false\n  }\n}\n\nfunction isFormElement(node) {\n  if (!node || node.nodeType !== node.ELEMENT_NODE) {\n    return false\n  }\n  var element = node\n  if (element.tagName === 'INPUT') {\n    switch (element.type) {\n      case 'button':\n      case 'color':\n      case 'reset':\n      case 'submit':\n        return false\n    }\n  }\n  return !!FORM_PRIVATE_TAG_NAMES[element.tagName]\n}\n\n/**\n * Text censoring non-destructively maintains whitespace characters in order to preserve text shape\n * during replay.\n */\nexport var censorText = function (text) {\n  return text.replace(/\\S/g, TEXT_MASKING_CHAR)\n}\n\nexport function getTextContent(\n  textNode,\n  ignoreWhiteSpace,\n  parentNodePrivacyLevel\n) {\n  // The parent node may not be a html element which has a tagName attribute.\n  // So just let it be undefined which is ok in this use case.\n  var parentTagName = textNode.parentElement && textNode.parentElement.tagName\n  var textContent = textNode.textContent || ''\n\n  if (ignoreWhiteSpace && !textContent.trim()) {\n    return\n  }\n\n  var nodePrivacyLevel = parentNodePrivacyLevel\n\n  //   var isStyle = parentTagName === 'STYLE' ? true : undefined\n  var isScript = parentTagName === 'SCRIPT'\n\n  if (isScript) {\n    // For perf reasons, we don't record script (heuristic)\n    textContent = CENSORED_STRING_MARK\n  } else if (nodePrivacyLevel === NodePrivacyLevel.HIDDEN) {\n    // Should never occur, but just in case, we set to CENSORED_MARK.\n    textContent = CENSORED_STRING_MARK\n  } else if (shouldMaskNode(textNode, nodePrivacyLevel)) {\n    if (\n      // Scrambling the child list breaks text nodes for DATALIST/SELECT/OPTGROUP\n      parentTagName === 'DATALIST' ||\n      parentTagName === 'SELECT' ||\n      parentTagName === 'OPTGROUP'\n    ) {\n      if (!textContent.trim()) {\n        return\n      }\n    } else if (parentTagName === 'OPTION') {\n      // <Option> has low entropy in charset + text length, so use `CENSORED_STRING_MARK` when masked\n      textContent = CENSORED_STRING_MARK\n    } else {\n      textContent = censorText(textContent)\n    }\n  }\n  //   else if (isStyle && textContent) {\n  //     try {\n  //       // try to read style sheet\n  //       if (textNode.nextSibling || textNode.previousSibling) {\n  //         // This is not the only child of the stylesheet.\n  //         // We can't read all of the sheet's .cssRules and expect them\n  //         // to _only_ include the current rule(s) added by the text node.\n  //         // So we'll be conservative and keep textContent as-is.\n  //       } else if (\n  //         textNode.parentNode &&\n  //         textNode.parentNode.sheet &&\n  //         textNode.parentNode.sheet.cssRules\n  //       ) {\n  //         textContent = getCssRulesString(textNode.parentNode.sheet)\n  //       }\n  //     } catch (err) {}\n  //     textContent = switchToAbsoluteUrl(textContent, getHref())\n  //   }\n  return textContent\n}\n\n/**\n * We don't need this logic on the recorder side.\n * For security related meta's, customer can mask themmanually given they\n * are easy to identify in the HEAD tag.\n */\nexport function shouldIgnoreElement(element) {\n  if (element.nodeName === 'SCRIPT') {\n    return true\n  }\n\n  if (element.nodeName === 'LINK') {\n    var relAttribute = getLowerCaseAttribute('rel')\n    return (\n      // Link as script - Ignore only when rel=preload, modulepreload or prefetch\n      (/preload|prefetch/i.test(relAttribute) &&\n        getLowerCaseAttribute('as') === 'script') ||\n      // Favicons\n      relAttribute === 'shortcut icon' ||\n      relAttribute === 'icon'\n    )\n  }\n\n  if (element.nodeName === 'META') {\n    var nameAttribute = getLowerCaseAttribute('name')\n    var relAttribute = getLowerCaseAttribute('rel')\n    var propertyAttribute = getLowerCaseAttribute('property')\n    return (\n      // Favicons\n      /^msapplication-tile(image|color)$/.test(nameAttribute) ||\n      nameAttribute === 'application-name' ||\n      relAttribute === 'icon' ||\n      relAttribute === 'apple-touch-icon' ||\n      relAttribute === 'shortcut icon' ||\n      // Description\n      nameAttribute === 'keywords' ||\n      nameAttribute === 'description' ||\n      // Social\n      /^(og|twitter|fb):/.test(propertyAttribute) ||\n      /^(og|twitter):/.test(nameAttribute) ||\n      nameAttribute === 'pinterest' ||\n      // Robots\n      nameAttribute === 'robots' ||\n      nameAttribute === 'googlebot' ||\n      nameAttribute === 'bingbot' ||\n      // Http headers. Ex: X-UA-Compatible, Content-Type, Content-Language, cache-control,\n      // X-Translated-By\n      element.hasAttribute('http-equiv') ||\n      // Authorship\n      nameAttribute === 'author' ||\n      nameAttribute === 'generator' ||\n      nameAttribute === 'framework' ||\n      nameAttribute === 'publisher' ||\n      nameAttribute === 'progid' ||\n      /^article:/.test(propertyAttribute) ||\n      /^product:/.test(propertyAttribute) ||\n      // Verification\n      nameAttribute === 'google-site-verification' ||\n      nameAttribute === 'yandex-verification' ||\n      nameAttribute === 'csrf-token' ||\n      nameAttribute === 'p:domain_verify' ||\n      nameAttribute === 'verify-v1' ||\n      nameAttribute === 'verification' ||\n      nameAttribute === 'shopify-checkout-api-token'\n    )\n  }\n\n  function getLowerCaseAttribute(name) {\n    return (element.getAttribute(name) || '').toLowerCase()\n  }\n\n  return false\n}\n"],"mappings":"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","ignoreList":[]}