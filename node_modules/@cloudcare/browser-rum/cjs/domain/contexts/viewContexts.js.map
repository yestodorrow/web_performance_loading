{"version":3,"file":"viewContexts.js","names":["_browserCore","require","VIEW_CONTEXT_TIME_OUT_DELAY","SESSION_TIME_OUT_DELAY","exports","startViewContexts","lifeCycle","viewContextHistory","ContextHistory","subscribe","LifeCycleEventType","BEFORE_VIEW_CREATED","view","add","buildViewContext","startClocks","relative","AFTER_VIEW_ENDED","data","closeActive","endClocks","SESSION_RENEWED","reset","service","version","id","name","findView","startTime","find","stop"],"sources":["../../../src/domain/contexts/viewContexts.js"],"sourcesContent":["import {\n  SESSION_TIME_OUT_DELAY,\n  ContextHistory,\n  LifeCycleEventType\n} from '@cloudcare/browser-core'\n\nexport var VIEW_CONTEXT_TIME_OUT_DELAY = SESSION_TIME_OUT_DELAY\n\nexport function startViewContexts(lifeCycle) {\n  var viewContextHistory = new ContextHistory(VIEW_CONTEXT_TIME_OUT_DELAY)\n\n  lifeCycle.subscribe(LifeCycleEventType.BEFORE_VIEW_CREATED, function (view) {\n    viewContextHistory.add(buildViewContext(view), view.startClocks.relative)\n  })\n\n  lifeCycle.subscribe(LifeCycleEventType.AFTER_VIEW_ENDED, function (data) {\n    viewContextHistory.closeActive(data.endClocks.relative)\n  })\n\n  lifeCycle.subscribe(LifeCycleEventType.SESSION_RENEWED, function () {\n    viewContextHistory.reset()\n  })\n\n  function buildViewContext(view) {\n    return {\n      service: view.service,\n      version: view.version,\n      id: view.id,\n      name: view.name\n    }\n  }\n\n  return {\n    findView: function (startTime) {\n      return viewContextHistory.find(startTime)\n    },\n    stop: function () {\n      viewContextHistory.stop()\n    }\n  }\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,YAAA,GAAAC,OAAA;AAMO,IAAIC,2BAA2B,GAAGC,mCAAsB;AAAAC,OAAA,CAAAF,2BAAA,GAAAA,2BAAA;AAExD,SAASG,iBAAiBA,CAACC,SAAS,EAAE;EAC3C,IAAIC,kBAAkB,GAAG,IAAIC,2BAAc,CAACN,2BAA2B,CAAC;EAExEI,SAAS,CAACG,SAAS,CAACC,+BAAkB,CAACC,mBAAmB,EAAE,UAAUC,IAAI,EAAE;IAC1EL,kBAAkB,CAACM,GAAG,CAACC,gBAAgB,CAACF,IAAI,CAAC,EAAEA,IAAI,CAACG,WAAW,CAACC,QAAQ,CAAC;EAC3E,CAAC,CAAC;EAEFV,SAAS,CAACG,SAAS,CAACC,+BAAkB,CAACO,gBAAgB,EAAE,UAAUC,IAAI,EAAE;IACvEX,kBAAkB,CAACY,WAAW,CAACD,IAAI,CAACE,SAAS,CAACJ,QAAQ,CAAC;EACzD,CAAC,CAAC;EAEFV,SAAS,CAACG,SAAS,CAACC,+BAAkB,CAACW,eAAe,EAAE,YAAY;IAClEd,kBAAkB,CAACe,KAAK,CAAC,CAAC;EAC5B,CAAC,CAAC;EAEF,SAASR,gBAAgBA,CAACF,IAAI,EAAE;IAC9B,OAAO;MACLW,OAAO,EAAEX,IAAI,CAACW,OAAO;MACrBC,OAAO,EAAEZ,IAAI,CAACY,OAAO;MACrBC,EAAE,EAAEb,IAAI,CAACa,EAAE;MACXC,IAAI,EAAEd,IAAI,CAACc;IACb,CAAC;EACH;EAEA,OAAO;IACLC,QAAQ,EAAE,SAAAA,SAAUC,SAAS,EAAE;MAC7B,OAAOrB,kBAAkB,CAACsB,IAAI,CAACD,SAAS,CAAC;IAC3C,CAAC;IACDE,IAAI,EAAE,SAAAA,KAAA,EAAY;MAChBvB,kBAAkB,CAACuB,IAAI,CAAC,CAAC;IAC3B;EACF,CAAC;AACH","ignoreList":[]}