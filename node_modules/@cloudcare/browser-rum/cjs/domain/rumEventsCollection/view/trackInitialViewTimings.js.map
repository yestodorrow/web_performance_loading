{"version":3,"file":"trackInitialViewTimings.js","names":["_browserCore","require","_trackFirstContentfulPaint2","_trackFirstInput2","_trackNavigationTimings2","_trackLargestContentfulPaint2","_trackFirstHidden","KEEP_TRACKING_TIMINGS_AFTER_VIEW_DELAY","ONE_MINUTE","exports","trackInitialViewMetrics","lifeCycle","configuration","setLoadEvent","scheduleViewUpdate","initialViewMetrics","_trackNavigationTimings","trackNavigationTimings","navigationTimings","loadEvent","firstHidden","trackFirstHidden","stopNavigationTracking","stop","_trackFirstContentfulPaint","trackFirstContentfulPaint","firstContentfulPaint","stopFCPTracking","_trackLargestContentfulPaint","trackLargestContentfulPaint","window","largestContentfulPaint","stopLCPTracking","_trackFirstInput","trackFirstInput","firstInput","stopFIDTracking"],"sources":["../../../../src/domain/rumEventsCollection/view/trackInitialViewTimings.js"],"sourcesContent":["import { ONE_MINUTE } from '@cloudcare/browser-core'\nimport { trackFirstContentfulPaint } from './trackFirstContentfulPaint'\nimport { trackFirstInput } from './trackFirstInput'\nimport { trackNavigationTimings } from './trackNavigationTimings'\nimport { trackLargestContentfulPaint } from './trackLargestContentfulPaint'\nimport { trackFirstHidden } from './trackFirstHidden'\n\nexport var KEEP_TRACKING_TIMINGS_AFTER_VIEW_DELAY = 5 * ONE_MINUTE\nexport function trackInitialViewMetrics(\n  lifeCycle,\n  configuration,\n  setLoadEvent,\n  scheduleViewUpdate\n) {\n  var initialViewMetrics = {}\n  var _trackNavigationTimings = trackNavigationTimings(\n    lifeCycle,\n    function (navigationTimings) {\n      setLoadEvent(navigationTimings.loadEvent)\n      initialViewMetrics.navigationTimings = navigationTimings\n      scheduleViewUpdate()\n    }\n  )\n  var firstHidden = trackFirstHidden()\n  var stopNavigationTracking = _trackNavigationTimings.stop\n  var _trackFirstContentfulPaint = trackFirstContentfulPaint(\n    lifeCycle,\n    firstHidden,\n    function (firstContentfulPaint) {\n      initialViewMetrics.firstContentfulPaint = firstContentfulPaint\n      scheduleViewUpdate()\n    }\n  )\n  var stopFCPTracking = _trackFirstContentfulPaint.stop\n  var _trackLargestContentfulPaint = trackLargestContentfulPaint(\n    lifeCycle,\n    configuration,\n    firstHidden,\n    window,\n    function (largestContentfulPaint) {\n      initialViewMetrics.largestContentfulPaint = largestContentfulPaint\n      scheduleViewUpdate()\n    }\n  )\n  var stopLCPTracking = _trackLargestContentfulPaint.stop\n  var _trackFirstInput = trackFirstInput(\n    lifeCycle,\n    configuration,\n    firstHidden,\n    function (firstInput) {\n      initialViewMetrics.firstInput = firstInput\n      scheduleViewUpdate()\n    }\n  )\n  var stopFIDTracking = _trackFirstInput.stop\n  function stop() {\n    stopNavigationTracking()\n    stopFCPTracking()\n    stopLCPTracking()\n    stopFIDTracking()\n    firstHidden.stop()\n  }\n\n  return {\n    stop: stop,\n    initialViewMetrics: initialViewMetrics\n  }\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,YAAA,GAAAC,OAAA;AACA,IAAAC,2BAAA,GAAAD,OAAA;AACA,IAAAE,iBAAA,GAAAF,OAAA;AACA,IAAAG,wBAAA,GAAAH,OAAA;AACA,IAAAI,6BAAA,GAAAJ,OAAA;AACA,IAAAK,iBAAA,GAAAL,OAAA;AAEO,IAAIM,sCAAsC,GAAG,CAAC,GAAGC,uBAAU;AAAAC,OAAA,CAAAF,sCAAA,GAAAA,sCAAA;AAC3D,SAASG,uBAAuBA,CACrCC,SAAS,EACTC,aAAa,EACbC,YAAY,EACZC,kBAAkB,EAClB;EACA,IAAIC,kBAAkB,GAAG,CAAC,CAAC;EAC3B,IAAIC,uBAAuB,GAAG,IAAAC,+CAAsB,EAClDN,SAAS,EACT,UAAUO,iBAAiB,EAAE;IAC3BL,YAAY,CAACK,iBAAiB,CAACC,SAAS,CAAC;IACzCJ,kBAAkB,CAACG,iBAAiB,GAAGA,iBAAiB;IACxDJ,kBAAkB,CAAC,CAAC;EACtB,CACF,CAAC;EACD,IAAIM,WAAW,GAAG,IAAAC,kCAAgB,EAAC,CAAC;EACpC,IAAIC,sBAAsB,GAAGN,uBAAuB,CAACO,IAAI;EACzD,IAAIC,0BAA0B,GAAG,IAAAC,qDAAyB,EACxDd,SAAS,EACTS,WAAW,EACX,UAAUM,oBAAoB,EAAE;IAC9BX,kBAAkB,CAACW,oBAAoB,GAAGA,oBAAoB;IAC9DZ,kBAAkB,CAAC,CAAC;EACtB,CACF,CAAC;EACD,IAAIa,eAAe,GAAGH,0BAA0B,CAACD,IAAI;EACrD,IAAIK,4BAA4B,GAAG,IAAAC,yDAA2B,EAC5DlB,SAAS,EACTC,aAAa,EACbQ,WAAW,EACXU,MAAM,EACN,UAAUC,sBAAsB,EAAE;IAChChB,kBAAkB,CAACgB,sBAAsB,GAAGA,sBAAsB;IAClEjB,kBAAkB,CAAC,CAAC;EACtB,CACF,CAAC;EACD,IAAIkB,eAAe,GAAGJ,4BAA4B,CAACL,IAAI;EACvD,IAAIU,gBAAgB,GAAG,IAAAC,iCAAe,EACpCvB,SAAS,EACTC,aAAa,EACbQ,WAAW,EACX,UAAUe,UAAU,EAAE;IACpBpB,kBAAkB,CAACoB,UAAU,GAAGA,UAAU;IAC1CrB,kBAAkB,CAAC,CAAC;EACtB,CACF,CAAC;EACD,IAAIsB,eAAe,GAAGH,gBAAgB,CAACV,IAAI;EAC3C,SAASA,IAAIA,CAAA,EAAG;IACdD,sBAAsB,CAAC,CAAC;IACxBK,eAAe,CAAC,CAAC;IACjBK,eAAe,CAAC,CAAC;IACjBI,eAAe,CAAC,CAAC;IACjBhB,WAAW,CAACG,IAAI,CAAC,CAAC;EACpB;EAEA,OAAO;IACLA,IAAI,EAAEA,IAAI;IACVR,kBAAkB,EAAEA;EACtB,CAAC;AACH","ignoreList":[]}