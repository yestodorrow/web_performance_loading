"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.trackFirstHidden = trackFirstHidden;
var _browserCore = require("@cloudcare/browser-core");
function trackFirstHidden(eventTarget) {
  if (typeof eventTarget === 'undefined') {
    eventTarget = window;
  }
  var timeStamp;
  var stopListeners;
  if (document.visibilityState === 'hidden') {
    timeStamp = 0;
  } else {
    timeStamp = Infinity;
    var stopListeners = (0, _browserCore.addEventListeners)(eventTarget, [_browserCore.DOM_EVENT.PAGE_HIDE, _browserCore.DOM_EVENT.VISIBILITY_CHANGE], function (event) {
      if (event.type === _browserCore.DOM_EVENT.PAGE_HIDE || document.visibilityState === 'hidden') {
        timeStamp = event.timeStamp;
        stopListeners();
      }
    }, {
      capture: true
    }).stop;
  }
  return {
    geTimeStamp: function geTimeStamp() {
      return timeStamp;
    },
    stop: function stop() {
      stopListeners && stopListeners();
    }
  };
}
//# sourceMappingURL=trackFirstHidden.js.map