"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TIMING_MAXIMUM_DELAY = void 0;
exports.trackFirstContentfulPaint = trackFirstContentfulPaint;
var _browserCore = require("@cloudcare/browser-core");
var TIMING_MAXIMUM_DELAY = 10 * _browserCore.ONE_MINUTE;
exports.TIMING_MAXIMUM_DELAY = TIMING_MAXIMUM_DELAY;
function trackFirstContentfulPaint(lifeCycle, firstHidden, callback) {
  var subscribe = lifeCycle.subscribe(_browserCore.LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED, function (entries) {
    var fcpEntry = (0, _browserCore.find)(entries, function (entry) {
      return entry.entryType === 'paint' && entry.name === 'first-contentful-paint' && entry.startTime < firstHidden.geTimeStamp() && entry.startTime < TIMING_MAXIMUM_DELAY;
    });
    if (fcpEntry) {
      callback(fcpEntry.startTime);
    }
  });
  return {
    stop: subscribe.unsubscribe
  };
}
//# sourceMappingURL=trackFirstContentfulPaint.js.map