{"version":3,"file":"trackEventCounts.js","names":["_browserCore","require","trackEventCounts","data","lifeCycle","isChildEvent","callback","onChange","undefined","noop","eventCounts","errorCount","longTaskCount","resourceCount","actionCount","frustrationCount","subscription","subscribe","LifeCycleEventType","RUM_EVENT_COLLECTED","event","type","RumEventType","VIEW","ERROR","ACTION","action","frustration","length","LONG_TASK","RESOURCE","stop","unsubscribe"],"sources":["../../src/domain/trackEventCounts.js"],"sourcesContent":["import { noop, RumEventType, LifeCycleEventType } from '@cloudcare/browser-core'\n\nexport function trackEventCounts(data) {\n  var lifeCycle = data.lifeCycle\n  var isChildEvent = data.isChildEvent\n  var callback = data.onChange\n  if (callback === undefined) {\n    callback = noop\n  }\n  var eventCounts = {\n    errorCount: 0,\n    longTaskCount: 0,\n    resourceCount: 0,\n    actionCount: 0,\n    frustrationCount: 0\n  }\n\n  var subscription = lifeCycle.subscribe(\n    LifeCycleEventType.RUM_EVENT_COLLECTED,\n    function (event) {\n      if (event.type === RumEventType.VIEW || !isChildEvent(event)) {\n        return\n      }\n      switch (event.type) {\n        case RumEventType.ERROR:\n          eventCounts.errorCount += 1\n\n          callback()\n          break\n        case RumEventType.ACTION:\n          if (event.action.frustration) {\n            eventCounts.frustrationCount += event.action.frustration.type.length\n          }\n          eventCounts.actionCount += 1\n          callback()\n          break\n        case RumEventType.LONG_TASK:\n          eventCounts.longTaskCount += 1\n          callback()\n          break\n        case RumEventType.RESOURCE:\n          eventCounts.resourceCount += 1\n          callback()\n          break\n      }\n    }\n  )\n\n  return {\n    stop: function () {\n      subscription.unsubscribe()\n    },\n    eventCounts: eventCounts\n  }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,YAAA,GAAAC,OAAA;AAEO,SAASC,gBAAgBA,CAACC,IAAI,EAAE;EACrC,IAAIC,SAAS,GAAGD,IAAI,CAACC,SAAS;EAC9B,IAAIC,YAAY,GAAGF,IAAI,CAACE,YAAY;EACpC,IAAIC,QAAQ,GAAGH,IAAI,CAACI,QAAQ;EAC5B,IAAID,QAAQ,KAAKE,SAAS,EAAE;IAC1BF,QAAQ,GAAGG,iBAAI;EACjB;EACA,IAAIC,WAAW,GAAG;IAChBC,UAAU,EAAE,CAAC;IACbC,aAAa,EAAE,CAAC;IAChBC,aAAa,EAAE,CAAC;IAChBC,WAAW,EAAE,CAAC;IACdC,gBAAgB,EAAE;EACpB,CAAC;EAED,IAAIC,YAAY,GAAGZ,SAAS,CAACa,SAAS,CACpCC,+BAAkB,CAACC,mBAAmB,EACtC,UAAUC,KAAK,EAAE;IACf,IAAIA,KAAK,CAACC,IAAI,KAAKC,yBAAY,CAACC,IAAI,IAAI,CAAClB,YAAY,CAACe,KAAK,CAAC,EAAE;MAC5D;IACF;IACA,QAAQA,KAAK,CAACC,IAAI;MAChB,KAAKC,yBAAY,CAACE,KAAK;QACrBd,WAAW,CAACC,UAAU,IAAI,CAAC;QAE3BL,QAAQ,CAAC,CAAC;QACV;MACF,KAAKgB,yBAAY,CAACG,MAAM;QACtB,IAAIL,KAAK,CAACM,MAAM,CAACC,WAAW,EAAE;UAC5BjB,WAAW,CAACK,gBAAgB,IAAIK,KAAK,CAACM,MAAM,CAACC,WAAW,CAACN,IAAI,CAACO,MAAM;QACtE;QACAlB,WAAW,CAACI,WAAW,IAAI,CAAC;QAC5BR,QAAQ,CAAC,CAAC;QACV;MACF,KAAKgB,yBAAY,CAACO,SAAS;QACzBnB,WAAW,CAACE,aAAa,IAAI,CAAC;QAC9BN,QAAQ,CAAC,CAAC;QACV;MACF,KAAKgB,yBAAY,CAACQ,QAAQ;QACxBpB,WAAW,CAACG,aAAa,IAAI,CAAC;QAC9BP,QAAQ,CAAC,CAAC;QACV;IACJ;EACF,CACF,CAAC;EAED,OAAO;IACLyB,IAAI,EAAE,SAAAA,KAAA,EAAY;MAChBf,YAAY,CAACgB,WAAW,CAAC,CAAC;IAC5B,CAAC;IACDtB,WAAW,EAAEA;EACf,CAAC;AACH","ignoreList":[]}