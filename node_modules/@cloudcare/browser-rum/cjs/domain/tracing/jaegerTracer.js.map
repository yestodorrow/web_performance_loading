{"version":3,"file":"jaegerTracer.js","names":["_traceIdentifier","require","JaegerTracer","configuration","traceSampled","_traceId","TraceIdentifier","_spanId","_traceSampled","is128Bit","traceId128Bit","prototype","isTracingSupported","getCrypto","undefined","getSpanId","toPaddedHexadecimalString","getTraceId","getUberTraceId","makeTracingHeaders"],"sources":["../../../src/domain/tracing/jaegerTracer.js"],"sourcesContent":["import { TraceIdentifier, getCrypto } from './traceIdentifier'\n\n/**\n *\n * @param {*} configuration  配置信息\n */\nexport function JaegerTracer(configuration, traceSampled) {\n  this._traceId = new TraceIdentifier()\n  this._spanId = new TraceIdentifier()\n  this._traceSampled = traceSampled\n  this.is128Bit = configuration.traceId128Bit\n}\nJaegerTracer.prototype = {\n  isTracingSupported: function () {\n    return getCrypto() !== undefined\n  },\n  getSpanId: function () {\n    return this._spanId.toPaddedHexadecimalString()\n  },\n  getTraceId: function () {\n    return this.is128Bit\n      ? '0000000000000000' + this._traceId.toPaddedHexadecimalString()\n      : this._traceId.toPaddedHexadecimalString()\n  },\n  getUberTraceId: function () {\n    //{trace-id}:{span-id}:{parent-span-id}:{flags}\n    return (\n      this.getTraceId() +\n      ':' +\n      this.getSpanId() +\n      ':' +\n      '0' +\n      ':' +\n      (this._traceSampled ? '1' : '0')\n    )\n  },\n  makeTracingHeaders: function () {\n    return {\n      'uber-trace-id': this.getUberTraceId()\n    }\n  }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,gBAAA,GAAAC,OAAA;AAEA;AACA;AACA;AACA;AACO,SAASC,YAAYA,CAACC,aAAa,EAAEC,YAAY,EAAE;EACxD,IAAI,CAACC,QAAQ,GAAG,IAAIC,gCAAe,CAAC,CAAC;EACrC,IAAI,CAACC,OAAO,GAAG,IAAID,gCAAe,CAAC,CAAC;EACpC,IAAI,CAACE,aAAa,GAAGJ,YAAY;EACjC,IAAI,CAACK,QAAQ,GAAGN,aAAa,CAACO,aAAa;AAC7C;AACAR,YAAY,CAACS,SAAS,GAAG;EACvBC,kBAAkB,EAAE,SAAAA,mBAAA,EAAY;IAC9B,OAAO,IAAAC,0BAAS,EAAC,CAAC,KAAKC,SAAS;EAClC,CAAC;EACDC,SAAS,EAAE,SAAAA,UAAA,EAAY;IACrB,OAAO,IAAI,CAACR,OAAO,CAACS,yBAAyB,CAAC,CAAC;EACjD,CAAC;EACDC,UAAU,EAAE,SAAAA,WAAA,EAAY;IACtB,OAAO,IAAI,CAACR,QAAQ,GAChB,kBAAkB,GAAG,IAAI,CAACJ,QAAQ,CAACW,yBAAyB,CAAC,CAAC,GAC9D,IAAI,CAACX,QAAQ,CAACW,yBAAyB,CAAC,CAAC;EAC/C,CAAC;EACDE,cAAc,EAAE,SAAAA,eAAA,EAAY;IAC1B;IACA,OACE,IAAI,CAACD,UAAU,CAAC,CAAC,GACjB,GAAG,GACH,IAAI,CAACF,SAAS,CAAC,CAAC,GAChB,GAAG,GACH,GAAG,GACH,GAAG,IACF,IAAI,CAACP,aAAa,GAAG,GAAG,GAAG,GAAG,CAAC;EAEpC,CAAC;EACDW,kBAAkB,EAAE,SAAAA,mBAAA,EAAY;IAC9B,OAAO;MACL,eAAe,EAAE,IAAI,CAACD,cAAc,CAAC;IACvC,CAAC;EACH;AACF,CAAC","ignoreList":[]}