{"version":3,"file":"zipkinSingleTracer.js","names":["_traceIdentifier","require","ZipkinSingleTracer","configuration","traceSampled","_traceId","TraceIdentifier","_spanId","_traceSampled","prototype","isTracingSupported","getCrypto","undefined","getSpanId","toPaddedHexadecimalString","getTraceId","getB3Str","makeTracingHeaders","b3"],"sources":["../../../src/domain/tracing/zipkinSingleTracer.js"],"sourcesContent":["import { TraceIdentifier, getCrypto } from './traceIdentifier'\n\n/**\n *\n * @param {*} configuration  配置信息\n */\nexport function ZipkinSingleTracer(configuration, traceSampled) {\n  this._traceId = new TraceIdentifier()\n  this._spanId = new TraceIdentifier()\n  this._traceSampled = traceSampled\n}\nZipkinSingleTracer.prototype = {\n  isTracingSupported: function () {\n    return getCrypto() !== undefined\n  },\n  getSpanId: function () {\n    return this._spanId.toPaddedHexadecimalString()\n  },\n  getTraceId: function () {\n    return this._traceId.toPaddedHexadecimalString()\n  },\n  getB3Str: function () {\n    //{TraceId}-{SpanId}-{SamplingState}-{ParentSpanId}\n    return (\n      this.getTraceId() +\n      '-' +\n      this.getSpanId() +\n      '-' +\n      (this._traceSampled ? '1' : '0')\n    )\n  },\n  makeTracingHeaders: function () {\n    return {\n      b3: this.getB3Str()\n    }\n  }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,gBAAA,GAAAC,OAAA;AAEA;AACA;AACA;AACA;AACO,SAASC,kBAAkBA,CAACC,aAAa,EAAEC,YAAY,EAAE;EAC9D,IAAI,CAACC,QAAQ,GAAG,IAAIC,gCAAe,CAAC,CAAC;EACrC,IAAI,CAACC,OAAO,GAAG,IAAID,gCAAe,CAAC,CAAC;EACpC,IAAI,CAACE,aAAa,GAAGJ,YAAY;AACnC;AACAF,kBAAkB,CAACO,SAAS,GAAG;EAC7BC,kBAAkB,EAAE,SAAAA,mBAAA,EAAY;IAC9B,OAAO,IAAAC,0BAAS,EAAC,CAAC,KAAKC,SAAS;EAClC,CAAC;EACDC,SAAS,EAAE,SAAAA,UAAA,EAAY;IACrB,OAAO,IAAI,CAACN,OAAO,CAACO,yBAAyB,CAAC,CAAC;EACjD,CAAC;EACDC,UAAU,EAAE,SAAAA,WAAA,EAAY;IACtB,OAAO,IAAI,CAACV,QAAQ,CAACS,yBAAyB,CAAC,CAAC;EAClD,CAAC;EACDE,QAAQ,EAAE,SAAAA,SAAA,EAAY;IACpB;IACA,OACE,IAAI,CAACD,UAAU,CAAC,CAAC,GACjB,GAAG,GACH,IAAI,CAACF,SAAS,CAAC,CAAC,GAChB,GAAG,IACF,IAAI,CAACL,aAAa,GAAG,GAAG,GAAG,GAAG,CAAC;EAEpC,CAAC;EACDS,kBAAkB,EAAE,SAAAA,mBAAA,EAAY;IAC9B,OAAO;MACLC,EAAE,EAAE,IAAI,CAACF,QAAQ,CAAC;IACpB,CAAC;EACH;AACF,CAAC","ignoreList":[]}