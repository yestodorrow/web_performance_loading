{"version":3,"file":"zipkinMultiTracer.js","names":["_traceIdentifier","require","ZipkinMultiTracer","configuration","traceSampled","_traceId","TraceIdentifier","_spanId","_traceSampled","is128Bit","traceId128Bit","prototype","isTracingSupported","getCrypto","undefined","getSpanId","toPaddedHexadecimalString","getTraceId","makeTracingHeaders"],"sources":["../../../src/domain/tracing/zipkinMultiTracer.js"],"sourcesContent":["import { TraceIdentifier, getCrypto } from './traceIdentifier'\n\n/**\n *\n * @param {*} configuration  配置信息\n */\nexport function ZipkinMultiTracer(configuration, traceSampled) {\n  this._traceId = new TraceIdentifier()\n  this._spanId = new TraceIdentifier()\n  this._traceSampled = traceSampled\n  this.is128Bit = configuration.traceId128Bit\n}\nZipkinMultiTracer.prototype = {\n  isTracingSupported: function () {\n    return getCrypto() !== undefined\n  },\n  getSpanId: function () {\n    return this._spanId.toPaddedHexadecimalString()\n  },\n  getTraceId: function () {\n    return this.is128Bit\n      ? '0000000000000000' + this._traceId.toPaddedHexadecimalString()\n      : this._traceId.toPaddedHexadecimalString()\n  },\n\n  makeTracingHeaders: function () {\n    return {\n      'X-B3-TraceId': this.getSpanId(),\n      'X-B3-SpanId': this.getTraceId(),\n      //  'X-B3-ParentSpanId': '',\n      'X-B3-Sampled': this._traceSampled ? '1' : '0'\n      //  'X-B3-Flags': '0'\n    }\n  }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,gBAAA,GAAAC,OAAA;AAEA;AACA;AACA;AACA;AACO,SAASC,iBAAiBA,CAACC,aAAa,EAAEC,YAAY,EAAE;EAC7D,IAAI,CAACC,QAAQ,GAAG,IAAIC,gCAAe,CAAC,CAAC;EACrC,IAAI,CAACC,OAAO,GAAG,IAAID,gCAAe,CAAC,CAAC;EACpC,IAAI,CAACE,aAAa,GAAGJ,YAAY;EACjC,IAAI,CAACK,QAAQ,GAAGN,aAAa,CAACO,aAAa;AAC7C;AACAR,iBAAiB,CAACS,SAAS,GAAG;EAC5BC,kBAAkB,EAAE,SAAAA,mBAAA,EAAY;IAC9B,OAAO,IAAAC,0BAAS,EAAC,CAAC,KAAKC,SAAS;EAClC,CAAC;EACDC,SAAS,EAAE,SAAAA,UAAA,EAAY;IACrB,OAAO,IAAI,CAACR,OAAO,CAACS,yBAAyB,CAAC,CAAC;EACjD,CAAC;EACDC,UAAU,EAAE,SAAAA,WAAA,EAAY;IACtB,OAAO,IAAI,CAACR,QAAQ,GAChB,kBAAkB,GAAG,IAAI,CAACJ,QAAQ,CAACW,yBAAyB,CAAC,CAAC,GAC9D,IAAI,CAACX,QAAQ,CAACW,yBAAyB,CAAC,CAAC;EAC/C,CAAC;EAEDE,kBAAkB,EAAE,SAAAA,mBAAA,EAAY;IAC9B,OAAO;MACL,cAAc,EAAE,IAAI,CAACH,SAAS,CAAC,CAAC;MAChC,aAAa,EAAE,IAAI,CAACE,UAAU,CAAC,CAAC;MAChC;MACA,cAAc,EAAE,IAAI,CAACT,aAAa,GAAG,GAAG,GAAG;MAC3C;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]}