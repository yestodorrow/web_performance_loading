{"version":3,"file":"init.js","names":["_tools","require","_monitor","_catchUserErrors","_typeof","obj","Symbol","iterator","constructor","prototype","makePublicApi","stub","publicApi","assign","onReady","callback","Object","defineProperty","get","setDebugMode","enumerable","defineGlobal","global","name","api","existingGlobalVariable","q","each","fn","catchUserErrors","getGlobalObject","globalThis","configurable","globalObject","_gc_temp_","self","window"],"sources":["../src/init.js"],"sourcesContent":["import { each, assign } from './helper/tools'\nimport { setDebugMode } from './helper/monitor'\nimport { catchUserErrors } from './helper/catchUserErrors'\n\nexport function makePublicApi(stub) {\n  var publicApi = assign(\n    {\n      onReady: function (callback) {\n        callback()\n      }\n    },\n    stub\n  )\n\n  // Add an \"hidden\" property to set debug mode. We define it that way to hide it\n  // as much as possible but of course it's not a real protection.\n  Object.defineProperty(publicApi, '_setDebug', {\n    get: function () {\n      return setDebugMode\n    },\n    enumerable: false\n  })\n\n  return publicApi\n}\nexport function defineGlobal(global, name, api) {\n  var existingGlobalVariable = global[name]\n  global[name] = api\n  if (existingGlobalVariable && existingGlobalVariable.q) {\n    each(existingGlobalVariable.q, function (fn) {\n      catchUserErrors(fn, 'onReady callback threw an error:')()\n    })\n  }\n}\n\nexport function getGlobalObject() {\n  if (typeof globalThis === 'object') {\n    return globalThis\n  }\n  Object.defineProperty(Object.prototype, '_gc_temp_', {\n    get: function () {\n      return this\n    },\n    configurable: true\n  })\n  // @ts-ignore\n  var globalObject = _gc_temp_\n  // @ts-ignore\n  delete Object.prototype._gc_temp_\n  if (typeof globalObject !== 'object') {\n    // on safari _gc_temp_ is available on window but not globally\n    // fallback on other browser globals check\n    if (typeof self === 'object') {\n      globalObject = self\n    } else if (typeof window === 'object') {\n      globalObject = window\n    } else {\n      globalObject = {}\n    }\n  }\n  return globalObject\n}\n// export function checkCookiesAuthorized(options) {\n//   if (!areCookiesAuthorized(options)) {\n//     console.warn('Cookies are not authorized, we will not send any data.')\n//     return false\n//   }\n//   return true\n// }\n\n// export function checkIsNotLocalFile() {\n//   if (isLocalFile()) {\n//     console.error('Execution is not allowed in the current context.')\n//     return false\n//   }\n//   return true\n// }\n\n// function isLocalFile() {\n//   return window.location.protocol === 'file:'\n// }\n"],"mappings":";;;;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,QAAA,GAAAD,OAAA;AACA,IAAAE,gBAAA,GAAAF,OAAA;AAA0D,SAAAG,QAAAC,GAAA,sCAAAD,OAAA,wBAAAE,MAAA,uBAAAA,MAAA,CAAAC,QAAA,aAAAF,GAAA,kBAAAA,GAAA,gBAAAA,GAAA,WAAAA,GAAA,yBAAAC,MAAA,IAAAD,GAAA,CAAAG,WAAA,KAAAF,MAAA,IAAAD,GAAA,KAAAC,MAAA,CAAAG,SAAA,qBAAAJ,GAAA,KAAAD,OAAA,CAAAC,GAAA;AAEnD,SAASK,aAAaA,CAACC,IAAI,EAAE;EAClC,IAAIC,SAAS,GAAG,IAAAC,aAAM,EACpB;IACEC,OAAO,EAAE,SAAAA,QAAUC,QAAQ,EAAE;MAC3BA,QAAQ,CAAC,CAAC;IACZ;EACF,CAAC,EACDJ,IACF,CAAC;;EAED;EACA;EACAK,MAAM,CAACC,cAAc,CAACL,SAAS,EAAE,WAAW,EAAE;IAC5CM,GAAG,EAAE,SAAAA,IAAA,EAAY;MACf,OAAOC,qBAAY;IACrB,CAAC;IACDC,UAAU,EAAE;EACd,CAAC,CAAC;EAEF,OAAOR,SAAS;AAClB;AACO,SAASS,YAAYA,CAACC,MAAM,EAAEC,IAAI,EAAEC,GAAG,EAAE;EAC9C,IAAIC,sBAAsB,GAAGH,MAAM,CAACC,IAAI,CAAC;EACzCD,MAAM,CAACC,IAAI,CAAC,GAAGC,GAAG;EAClB,IAAIC,sBAAsB,IAAIA,sBAAsB,CAACC,CAAC,EAAE;IACtD,IAAAC,WAAI,EAACF,sBAAsB,CAACC,CAAC,EAAE,UAAUE,EAAE,EAAE;MAC3C,IAAAC,gCAAe,EAACD,EAAE,EAAE,kCAAkC,CAAC,CAAC,CAAC;IAC3D,CAAC,CAAC;EACJ;AACF;AAEO,SAASE,eAAeA,CAAA,EAAG;EAChC,IAAI,QAAOC,UAAU,iCAAA3B,OAAA,CAAV2B,UAAU,OAAK,QAAQ,EAAE;IAClC,OAAOA,UAAU;EACnB;EACAf,MAAM,CAACC,cAAc,CAACD,MAAM,CAACP,SAAS,EAAE,WAAW,EAAE;IACnDS,GAAG,EAAE,SAAAA,IAAA,EAAY;MACf,OAAO,IAAI;IACb,CAAC;IACDc,YAAY,EAAE;EAChB,CAAC,CAAC;EACF;EACA,IAAIC,YAAY,GAAGC,SAAS;EAC5B;EACA,OAAOlB,MAAM,CAACP,SAAS,CAACyB,SAAS;EACjC,IAAI9B,OAAA,CAAO6B,YAAY,MAAK,QAAQ,EAAE;IACpC;IACA;IACA,IAAI,QAAOE,IAAI,iCAAA/B,OAAA,CAAJ+B,IAAI,OAAK,QAAQ,EAAE;MAC5BF,YAAY,GAAGE,IAAI;IACrB,CAAC,MAAM,IAAI,QAAOC,MAAM,iCAAAhC,OAAA,CAANgC,MAAM,OAAK,QAAQ,EAAE;MACrCH,YAAY,GAAGG,MAAM;IACvB,CAAC,MAAM;MACLH,YAAY,GAAG,CAAC,CAAC;IACnB;EACF;EACA,OAAOA,YAAY;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","ignoreList":[]}