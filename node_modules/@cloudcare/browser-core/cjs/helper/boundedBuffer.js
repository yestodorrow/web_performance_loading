"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.BoundedBuffer = void 0;
var _tools = require("./tools");
var BUFFER_LIMIT = 500;
var _BoundedBuffer = function _BoundedBuffer() {
  this.buffer = [];
};
_BoundedBuffer.prototype = {
  add: function add(callback) {
    var length = this.buffer.push(callback);
    if (length > BUFFER_LIMIT) {
      this.buffer.splice(0, 1);
    }
  },
  drain: function drain() {
    (0, _tools.each)(this.buffer, function (callback) {
      callback();
    });
    this.buffer.length = 0;
  }
};
var BoundedBuffer = _BoundedBuffer;
exports.BoundedBuffer = BoundedBuffer;
//# sourceMappingURL=boundedBuffer.js.map