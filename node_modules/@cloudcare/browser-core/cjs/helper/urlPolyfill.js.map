{"version":3,"file":"urlPolyfill.js","names":["_tools","require","normalizeUrl","url","buildUrl","getLocationOrigin","href","isValidUrl","e","getOrigin","getLinkElementOrigin","getPathName","pathname","getSearch","search","getHash","hash","base","checkURLSupported","undefined","URL","test","Error","doc","document","anchorElement","createElement","implementation","createHTMLDocument","baseElement","head","appendChild","body","isURLSupported"],"sources":["../../src/helper/urlPolyfill.js"],"sourcesContent":["import { getLinkElementOrigin, getLocationOrigin } from './tools'\n\nexport function normalizeUrl(url) {\n  return buildUrl(url, getLocationOrigin()).href\n}\n\nexport function isValidUrl(url) {\n  try {\n    return !!buildUrl(url)\n  } catch (e) {\n    return false\n  }\n}\n\n// export function haveSameOrigin(url1, url2) {\n//   return getOrigin(url1) === getOrigin(url2)\n// }\n\nexport function getOrigin(url) {\n  return getLinkElementOrigin(buildUrl(url))\n}\n\nexport function getPathName(url) {\n  var pathname = buildUrl(url).pathname\n  return pathname[0] === '/' ? pathname : '/' + pathname\n}\n\nexport function getSearch(url) {\n  return buildUrl(url).search\n}\n\nexport function getHash(url) {\n  return buildUrl(url).hash\n}\n\nexport function buildUrl(url, base) {\n  if (checkURLSupported()) {\n    return base !== undefined ? new URL(url, base) : new URL(url)\n  }\n  if (base === undefined && !/:/.test(url)) {\n    throw new Error('Invalid URL: ' + url)\n  }\n  var doc = document\n  var anchorElement = doc.createElement('a')\n  if (base !== undefined) {\n    doc = document.implementation.createHTMLDocument('')\n    var baseElement = doc.createElement('base')\n    baseElement.href = base\n    doc.head.appendChild(baseElement)\n    doc.body.appendChild(anchorElement)\n  }\n  anchorElement.href = url\n  return anchorElement\n}\n\nvar isURLSupported\nfunction checkURLSupported() {\n  if (isURLSupported !== undefined) {\n    return isURLSupported\n  }\n  try {\n    var url = new URL('http://test/path')\n    isURLSupported = url.href === 'http://test/path'\n    return isURLSupported\n  } catch (e) {\n    isURLSupported = false\n  }\n  return isURLSupported\n}\n"],"mappings":";;;;;;;;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAEO,SAASC,YAAYA,CAACC,GAAG,EAAE;EAChC,OAAOC,QAAQ,CAACD,GAAG,EAAE,IAAAE,wBAAiB,EAAC,CAAC,CAAC,CAACC,IAAI;AAChD;AAEO,SAASC,UAAUA,CAACJ,GAAG,EAAE;EAC9B,IAAI;IACF,OAAO,CAAC,CAACC,QAAQ,CAACD,GAAG,CAAC;EACxB,CAAC,CAAC,OAAOK,CAAC,EAAE;IACV,OAAO,KAAK;EACd;AACF;;AAEA;AACA;AACA;;AAEO,SAASC,SAASA,CAACN,GAAG,EAAE;EAC7B,OAAO,IAAAO,2BAAoB,EAACN,QAAQ,CAACD,GAAG,CAAC,CAAC;AAC5C;AAEO,SAASQ,WAAWA,CAACR,GAAG,EAAE;EAC/B,IAAIS,QAAQ,GAAGR,QAAQ,CAACD,GAAG,CAAC,CAACS,QAAQ;EACrC,OAAOA,QAAQ,CAAC,CAAC,CAAC,KAAK,GAAG,GAAGA,QAAQ,GAAG,GAAG,GAAGA,QAAQ;AACxD;AAEO,SAASC,SAASA,CAACV,GAAG,EAAE;EAC7B,OAAOC,QAAQ,CAACD,GAAG,CAAC,CAACW,MAAM;AAC7B;AAEO,SAASC,OAAOA,CAACZ,GAAG,EAAE;EAC3B,OAAOC,QAAQ,CAACD,GAAG,CAAC,CAACa,IAAI;AAC3B;AAEO,SAASZ,QAAQA,CAACD,GAAG,EAAEc,IAAI,EAAE;EAClC,IAAIC,iBAAiB,CAAC,CAAC,EAAE;IACvB,OAAOD,IAAI,KAAKE,SAAS,GAAG,IAAIC,GAAG,CAACjB,GAAG,EAAEc,IAAI,CAAC,GAAG,IAAIG,GAAG,CAACjB,GAAG,CAAC;EAC/D;EACA,IAAIc,IAAI,KAAKE,SAAS,IAAI,CAAC,GAAG,CAACE,IAAI,CAAClB,GAAG,CAAC,EAAE;IACxC,MAAM,IAAImB,KAAK,CAAC,eAAe,GAAGnB,GAAG,CAAC;EACxC;EACA,IAAIoB,GAAG,GAAGC,QAAQ;EAClB,IAAIC,aAAa,GAAGF,GAAG,CAACG,aAAa,CAAC,GAAG,CAAC;EAC1C,IAAIT,IAAI,KAAKE,SAAS,EAAE;IACtBI,GAAG,GAAGC,QAAQ,CAACG,cAAc,CAACC,kBAAkB,CAAC,EAAE,CAAC;IACpD,IAAIC,WAAW,GAAGN,GAAG,CAACG,aAAa,CAAC,MAAM,CAAC;IAC3CG,WAAW,CAACvB,IAAI,GAAGW,IAAI;IACvBM,GAAG,CAACO,IAAI,CAACC,WAAW,CAACF,WAAW,CAAC;IACjCN,GAAG,CAACS,IAAI,CAACD,WAAW,CAACN,aAAa,CAAC;EACrC;EACAA,aAAa,CAACnB,IAAI,GAAGH,GAAG;EACxB,OAAOsB,aAAa;AACtB;AAEA,IAAIQ,cAAc;AAClB,SAASf,iBAAiBA,CAAA,EAAG;EAC3B,IAAIe,cAAc,KAAKd,SAAS,EAAE;IAChC,OAAOc,cAAc;EACvB;EACA,IAAI;IACF,IAAI9B,GAAG,GAAG,IAAIiB,GAAG,CAAC,kBAAkB,CAAC;IACrCa,cAAc,GAAG9B,GAAG,CAACG,IAAI,KAAK,kBAAkB;IAChD,OAAO2B,cAAc;EACvB,CAAC,CAAC,OAAOzB,CAAC,EAAE;IACVyB,cAAc,GAAG,KAAK;EACxB;EACA,OAAOA,cAAc;AACvB","ignoreList":[]}