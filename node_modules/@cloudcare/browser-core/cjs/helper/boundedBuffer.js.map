{"version":3,"file":"boundedBuffer.js","names":["_tools","require","BUFFER_LIMIT","_BoundedBuffer","buffer","prototype","add","callback","length","push","splice","drain","each","BoundedBuffer","exports"],"sources":["../../src/helper/boundedBuffer.js"],"sourcesContent":["import { each } from './tools'\nvar BUFFER_LIMIT = 500\n\nvar _BoundedBuffer = function () {\n  this.buffer = []\n}\n_BoundedBuffer.prototype = {\n  add: function (callback) {\n    var length = this.buffer.push(callback)\n    if (length > BUFFER_LIMIT) {\n      this.buffer.splice(0, 1)\n    }\n  },\n\n  drain: function () {\n    each(this.buffer, function (callback) {\n      callback()\n    })\n    this.buffer.length = 0\n  }\n}\nexport var BoundedBuffer = _BoundedBuffer\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAIC,YAAY,GAAG,GAAG;AAEtB,IAAIC,cAAc,GAAG,SAAjBA,cAAcA,CAAA,EAAe;EAC/B,IAAI,CAACC,MAAM,GAAG,EAAE;AAClB,CAAC;AACDD,cAAc,CAACE,SAAS,GAAG;EACzBC,GAAG,EAAE,SAAAA,IAAUC,QAAQ,EAAE;IACvB,IAAIC,MAAM,GAAG,IAAI,CAACJ,MAAM,CAACK,IAAI,CAACF,QAAQ,CAAC;IACvC,IAAIC,MAAM,GAAGN,YAAY,EAAE;MACzB,IAAI,CAACE,MAAM,CAACM,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC;IAC1B;EACF,CAAC;EAEDC,KAAK,EAAE,SAAAA,MAAA,EAAY;IACjB,IAAAC,WAAI,EAAC,IAAI,CAACR,MAAM,EAAE,UAAUG,QAAQ,EAAE;MACpCA,QAAQ,CAAC,CAAC;IACZ,CAAC,CAAC;IACF,IAAI,CAACH,MAAM,CAACI,MAAM,GAAG,CAAC;EACxB;AACF,CAAC;AACM,IAAIK,aAAa,GAAGV,cAAc;AAAAW,OAAA,CAAAD,aAAA,GAAAA,aAAA","ignoreList":[]}