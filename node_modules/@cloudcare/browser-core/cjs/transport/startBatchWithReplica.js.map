{"version":3,"file":"startBatchWithReplica.js","names":["_batch","require","_httpRequest","_flushController","startBatchWithReplica","configuration","endpointUrl","reportError","pageExitObservable","sessionExpireObservable","primaryBatch","createBatch","Batch","createHttpRequest","batchBytesLimit","sendContentTypeByJson","createFlushController","messagesLimit","batchMessagesLimit","bytesLimit","durationLimit","flushTimeout","messageBytesLimit","add","message"],"sources":["../../src/transport/startBatchWithReplica.js"],"sourcesContent":["import { Batch } from './batch'\nimport { createHttpRequest } from './httpRequest'\nimport { createFlushController } from './flushController'\nexport function startBatchWithReplica(\n  configuration,\n  endpointUrl,\n  reportError,\n  pageExitObservable,\n  sessionExpireObservable\n) {\n  var primaryBatch = createBatch(endpointUrl)\n\n  function createBatch(endpointUrl) {\n    return new Batch(\n      createHttpRequest(\n        endpointUrl,\n        configuration.batchBytesLimit,\n        configuration.sendContentTypeByJson,\n        reportError\n      ),\n      createFlushController({\n        messagesLimit: configuration.batchMessagesLimit,\n        bytesLimit: configuration.batchBytesLimit,\n        durationLimit: configuration.flushTimeout,\n        pageExitObservable: pageExitObservable,\n        sessionExpireObservable: sessionExpireObservable\n      }),\n      configuration.messageBytesLimit,\n      configuration.sendContentTypeByJson\n    )\n  }\n\n  return {\n    add: function (message) {\n      primaryBatch.add(message)\n    }\n  }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AACA,IAAAE,gBAAA,GAAAF,OAAA;AACO,SAASG,qBAAqBA,CACnCC,aAAa,EACbC,WAAW,EACXC,WAAW,EACXC,kBAAkB,EAClBC,uBAAuB,EACvB;EACA,IAAIC,YAAY,GAAGC,WAAW,CAACL,WAAW,CAAC;EAE3C,SAASK,WAAWA,CAACL,WAAW,EAAE;IAChC,OAAO,IAAIM,YAAK,CACd,IAAAC,8BAAiB,EACfP,WAAW,EACXD,aAAa,CAACS,eAAe,EAC7BT,aAAa,CAACU,qBAAqB,EACnCR,WACF,CAAC,EACD,IAAAS,sCAAqB,EAAC;MACpBC,aAAa,EAAEZ,aAAa,CAACa,kBAAkB;MAC/CC,UAAU,EAAEd,aAAa,CAACS,eAAe;MACzCM,aAAa,EAAEf,aAAa,CAACgB,YAAY;MACzCb,kBAAkB,EAAEA,kBAAkB;MACtCC,uBAAuB,EAAEA;IAC3B,CAAC,CAAC,EACFJ,aAAa,CAACiB,iBAAiB,EAC/BjB,aAAa,CAACU,qBAChB,CAAC;EACH;EAEA,OAAO;IACLQ,GAAG,EAAE,SAAAA,IAAUC,OAAO,EAAE;MACtBd,YAAY,CAACa,GAAG,CAACC,OAAO,CAAC;IAC3B;EACF,CAAC;AACH","ignoreList":[]}