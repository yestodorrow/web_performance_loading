{"version":3,"file":"init.js","names":["each","assign","setDebugMode","catchUserErrors","makePublicApi","stub","publicApi","onReady","callback","Object","defineProperty","get","enumerable","defineGlobal","global","name","api","existingGlobalVariable","q","fn","getGlobalObject","globalThis","_typeof","prototype","configurable","globalObject","_gc_temp_","self","window"],"sources":["../src/init.js"],"sourcesContent":["import { each, assign } from './helper/tools'\nimport { setDebugMode } from './helper/monitor'\nimport { catchUserErrors } from './helper/catchUserErrors'\n\nexport function makePublicApi(stub) {\n  var publicApi = assign(\n    {\n      onReady: function (callback) {\n        callback()\n      }\n    },\n    stub\n  )\n\n  // Add an \"hidden\" property to set debug mode. We define it that way to hide it\n  // as much as possible but of course it's not a real protection.\n  Object.defineProperty(publicApi, '_setDebug', {\n    get: function () {\n      return setDebugMode\n    },\n    enumerable: false\n  })\n\n  return publicApi\n}\nexport function defineGlobal(global, name, api) {\n  var existingGlobalVariable = global[name]\n  global[name] = api\n  if (existingGlobalVariable && existingGlobalVariable.q) {\n    each(existingGlobalVariable.q, function (fn) {\n      catchUserErrors(fn, 'onReady callback threw an error:')()\n    })\n  }\n}\n\nexport function getGlobalObject() {\n  if (typeof globalThis === 'object') {\n    return globalThis\n  }\n  Object.defineProperty(Object.prototype, '_gc_temp_', {\n    get: function () {\n      return this\n    },\n    configurable: true\n  })\n  // @ts-ignore\n  var globalObject = _gc_temp_\n  // @ts-ignore\n  delete Object.prototype._gc_temp_\n  if (typeof globalObject !== 'object') {\n    // on safari _gc_temp_ is available on window but not globally\n    // fallback on other browser globals check\n    if (typeof self === 'object') {\n      globalObject = self\n    } else if (typeof window === 'object') {\n      globalObject = window\n    } else {\n      globalObject = {}\n    }\n  }\n  return globalObject\n}\n// export function checkCookiesAuthorized(options) {\n//   if (!areCookiesAuthorized(options)) {\n//     console.warn('Cookies are not authorized, we will not send any data.')\n//     return false\n//   }\n//   return true\n// }\n\n// export function checkIsNotLocalFile() {\n//   if (isLocalFile()) {\n//     console.error('Execution is not allowed in the current context.')\n//     return false\n//   }\n//   return true\n// }\n\n// function isLocalFile() {\n//   return window.location.protocol === 'file:'\n// }\n"],"mappings":";AAAA,SAASA,IAAI,EAAEC,MAAM,QAAQ,gBAAgB;AAC7C,SAASC,YAAY,QAAQ,kBAAkB;AAC/C,SAASC,eAAe,QAAQ,0BAA0B;AAE1D,OAAO,SAASC,aAAaA,CAACC,IAAI,EAAE;EAClC,IAAIC,SAAS,GAAGL,MAAM,CACpB;IACEM,OAAO,EAAE,SAAAA,QAAUC,QAAQ,EAAE;MAC3BA,QAAQ,CAAC,CAAC;IACZ;EACF,CAAC,EACDH,IACF,CAAC;;EAED;EACA;EACAI,MAAM,CAACC,cAAc,CAACJ,SAAS,EAAE,WAAW,EAAE;IAC5CK,GAAG,EAAE,SAAAA,IAAA,EAAY;MACf,OAAOT,YAAY;IACrB,CAAC;IACDU,UAAU,EAAE;EACd,CAAC,CAAC;EAEF,OAAON,SAAS;AAClB;AACA,OAAO,SAASO,YAAYA,CAACC,MAAM,EAAEC,IAAI,EAAEC,GAAG,EAAE;EAC9C,IAAIC,sBAAsB,GAAGH,MAAM,CAACC,IAAI,CAAC;EACzCD,MAAM,CAACC,IAAI,CAAC,GAAGC,GAAG;EAClB,IAAIC,sBAAsB,IAAIA,sBAAsB,CAACC,CAAC,EAAE;IACtDlB,IAAI,CAACiB,sBAAsB,CAACC,CAAC,EAAE,UAAUC,EAAE,EAAE;MAC3ChB,eAAe,CAACgB,EAAE,EAAE,kCAAkC,CAAC,CAAC,CAAC;IAC3D,CAAC,CAAC;EACJ;AACF;AAEA,OAAO,SAASC,eAAeA,CAAA,EAAG;EAChC,IAAI,QAAOC,UAAU,iCAAAC,OAAA,CAAVD,UAAU,OAAK,QAAQ,EAAE;IAClC,OAAOA,UAAU;EACnB;EACAZ,MAAM,CAACC,cAAc,CAACD,MAAM,CAACc,SAAS,EAAE,WAAW,EAAE;IACnDZ,GAAG,EAAE,SAAAA,IAAA,EAAY;MACf,OAAO,IAAI;IACb,CAAC;IACDa,YAAY,EAAE;EAChB,CAAC,CAAC;EACF;EACA,IAAIC,YAAY,GAAGC,SAAS;EAC5B;EACA,OAAOjB,MAAM,CAACc,SAAS,CAACG,SAAS;EACjC,IAAIJ,OAAA,CAAOG,YAAY,MAAK,QAAQ,EAAE;IACpC;IACA;IACA,IAAI,QAAOE,IAAI,iCAAAL,OAAA,CAAJK,IAAI,OAAK,QAAQ,EAAE;MAC5BF,YAAY,GAAGE,IAAI;IACrB,CAAC,MAAM,IAAI,QAAOC,MAAM,iCAAAN,OAAA,CAANM,MAAM,OAAK,QAAQ,EAAE;MACrCH,YAAY,GAAGG,MAAM;IACvB,CAAC,MAAM;MACLH,YAAY,GAAG,CAAC,CAAC;IACnB;EACF;EACA,OAAOA,YAAY;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","ignoreList":[]}